# Требования для отображения контуров территорий

Требования для отображения контуров территорий
-


# Требования для отображения контуров территорий


Для карты доступно отображение [контуров
 территорий](../Configure/terr_contour.htm), если выполняются следующие условия:


	- Территориальное измерение является иерархическим.


	- Территориальное измерение содержит атрибуты целого типа с идентификатором
	 вида «TOPO_IDN», где N - это уровень иерархии территориального измерения,
	 для элементов которого будет отображаться контур. Если N=1, то используется
	 атрибут «TOPO_ID».


	- Атрибут «TOPO_IDN» содержит ключ карты, используемой для
	 визуализации контура в соответствии с уровнем иерархии территориального
	 измерения.


Примечание.
 Отображение контуров территорий доступно в инструментах «Аналитические
 запросы (OLAP)» и «Аналитические
 панели».


Для отображения контуров территорий используется та карта, ключ которой
 указан в атрибуте «TOPO_IDN», соответствующем уровню иерархии. Данный
 атрибут берется у родителя отмеченных элементов территориального измерения,
 который находится ближе всего к началу иерархии, а для корневого элемента
 иерархии берется у самого элемента. Если карта с ключом «TOPO_IDN» не
 найдена, то берется ближайшая родительская карта по принципу TOPO_IDN
 → TOPO_IDN-1 → … → TOPO_ID3 → TOPO_ID2 → TOPO_ID.


## Пример территориального измерения и логика отображения контуров территорий


Например, есть территориальное измерение, содержащее корневой элемент
 «Мир». «Мир» имеет дочерние элементы уровня континентов: «Европа» и «Азия».
 В свою очередь каждый континент имеет дочерние элементы уровня стран:
 «Франция» и «Россия». Каждая страна имеет дочерние элементы уровня округов:
 «Бордо», «Центральный федеральный округ».


Для данного территориального измерения будет применяться следующая структура
 для отображения контуров территорий:


		 Уровень иерархии/ карта
		 Карта для TOPO_ID
		 Карта для TOPO_ID2
		 Карта для TOPO_ID3
		 Карта для TOPO_ID4


		 Мир
		 Мир по континентам
		 Мир по странам
		 Мир по округам стран
		 Мир по регионам округов


		 Континенты


		 Континент по странам
		 Континент по округам странам
		 Континент по регионам округов


		 Страны


		 Страна по округам
		 Страна по регионам округов


		 Округа


		 Округ по регионам


Пример значений атрибутов «TOPO_IDN» приведены в таблице:


		 Элементы
		 TOPO_ID
		 TOPO_ID2
		 TOPO_ID3
		 TOPO_ID4


		 Мир
		 100
		 102
		 103
		 104


		 Европа


		 200
		 202
		 203


		 Франция


		 300
		 302


		 Бордо


		 400


		 Азия


		 500
		 502
		 503


		 Россия


		 600
		 602


		 Центральный федеральный
		 округ


		 700


Логика получения карты для отображения контуров территорий:


	- при отметке всех уровней по иерархии:


		- при отметке корневого элемента иерархии отображается карта
		 «TOPO_ID» корневого элемента иерархии, то есть при отметке элемента
		 «Мир» отображается карта с ключом «100»;


		- при отметке корневого элемента и элементов второго уровня
		 отображается карта «TOPO_ID2» корневого элемента иерархии, то
		 есть при отметке элементов «Мир» и «Европа» отображается карта
		 с ключом «102»;


		- при отметке корневого элемента, элементов второго и третьего
		 уровней отображается карта «TOPO_ID3» корневого элемента иерархии,
		 то есть при отметке элементов «Мир», «Европа» и «Франция» отображается
		 карта с ключом «103»;


		- при отметке корневого элемента, элементов второго, третьего
		 и четвертого уровней отображается карта «TOPO_ID4» корневого элемента,
		 то есть при отметке элементов «Мир», «Европа», «Франция» и «Бордо»
		 отображается карта с ключом «104»;


		- при отметке корневого элемента, элементов второго, третьего,
		 четвертого и пятого уровней отображается карта «TOPO_ID5» корневого
		 элемента и так далее;


	- при частичной отметке по уровням иерархии:


		- при отметке элементов второго уровня без отметки корневого
		 элемента иерархии отображается карта «TOPO_ID2» корневого элемента
		 иерархии, то есть при отметке элементов «Европа» и «Азия» отображается
		 карта с ключом «102»;


		- при отметке элементов второго уровня и элементов третьего
		 уровня без выделения корневого элемента иерархии отображается
		 карта «TOPO_ID3» корневого элемента иерархии, то есть при отметке
		 элементов «Европа», «Азия» и «Франция» отображается карта с ключом
		 «103»;


		- при отметке одного элемента второго уровня без выделения
		 корневого элемента иерархии отображается карта «TOPO_ID» отмеченного
		 элемента второго уровня, то есть при отметке элемента «Азия» отображается
		 карта с ключом «500»;


		- при отметке одного элемента второго уровня и отметке одного
		 или нескольких дочерних элементов третьего уровня отображается
		 карта «TOPO_ID2» отмеченного элемента второго уровня, то есть
		 при отметке элементов «Азия» и «Россия» отображается карта с ключом
		 «502»;


		- при отметке одного элемента второго уровня, отметке одного
		 или нескольких дочерних элементов третьего уровня и отметке элементов
		 четвертого уровня отображается карта «TOPO_ID3» отмеченного элемента
		 второго уровня, то есть при отметке элементов Азия», «Россия»
		 и «Центральный федеральный округ» отображается карта с ключом
		 «503»;


		- при отметке одного элемента третьего уровня и нескольких
		 дочерних элементов четвертого уровня отображается карта «TOPO_ID2»
		 отмеченного элемента третьего уровня и так далее.


См. также:


[Основные требования для работы с картой](Requirements.htm)
 | [Отображение контуров территорий](../Configure/terr_contour.htm)


		Справочная
		 система на версию 10.9
		 от 18/08/2025,
		 © ООО «ФОРСАЙТ»,
