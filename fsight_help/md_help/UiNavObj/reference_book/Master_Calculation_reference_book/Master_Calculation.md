# Вычисляемый справочник

Вычисляемый справочник
-


# Вычисляемый справочник


Структура справочника задается по аналогии с [табличным
 справочником](../Master_Table_reference_book/Master_Table.htm). Наполнение справочника элементами осуществляется на
 основе алгоритма пользователя. Алгоритм задается в виде модуля на внутреннем
 языке программирования Fore. Модуль должен содержать процедуру, имеющую
 следующую сигнатуру:


Sub <Name>(UserDim: IUserDimension; Builder: IDimBuilder; Params: IMetabaseObjectParamValues);

Begin

    //Код для построения дерева элементов вычисляемого справочника

End Sub <Name>;


Наименование процедуры и параметров может быть любым, удовлетворяющим
 спецификации языка Fore.


Модуль выполняется всякий раз, когда справочник используется. Однако
 при помощи механизма кеширования объектов платформы эта операция автоматически
 выполняется только в случае, когда он еще отсутствует в кеше либо при
 выполнении операции «Обновить».
 В общем случае для вычисляемого справочника не обязательно наличие таблицы
 для хранения его элементов. В определении модуля могут использоваться
 любые объекты репозитория, в том числе и таблицы с данными.


Вычисляемый справочник поддерживает динамическое изменение при помощи
 параметров, то есть является динамическим.


[![](../../Opened.gif)![](../../Closed.gif)Создание вычисляемого
 справочника](javascript:TextPopup(this))


	Для создания вычисляемого справочника в [навигаторе
	 объектов](GetStarted.chm::/Interface/Interface_Navigator.htm):


	- в веб-приложении нажмите кнопку ![](../../Cube/CreateCube/Master_Standart/add_button.png) «Создать» в главном меню и выберите
	 тип объекта на боковой панели «[Новый объект](UiNav.chm::/02_Navigator/General_Principles_of_Work.htm#add_object)»;


	- в настольном приложении выполните одно из действий:


		- нажмите кнопку «Новый объект
		 > Справочник» в группе «Создать»
		 на вкладке «Главная» ленты
		 инструментов;


		- выполните команду «Создать
		 > Справочник» в контекстном меню навигатора объектов.


Выберите тип создаваемого справочника на
 странице «Тип справочника» в мастере
 справочника.


	Веб-приложение Настольное приложение


		![](attributes_page.png)


		![](Calculated_directory_struct.png)


В мастере доступны страницы:


	- [Базовые
	 настройки/Базовые свойства](base_settings.htm). Задаются наименование
	 объекта, идентификатор и примечание;


	- [Параметры](parameters.htm).
	 Формируется список параметров;


	- [Атрибуты](UiMd_reference_book_Master_Calculation_Atribute.htm).
	 Формируется список атрибутов, характеризующих каждый элемент справочника;


	- [Сортировка](UiMd_reference_book_Master_Calculation_Sorting.htm).
	 Определяется набор и порядок атрибутов, по которым будет производиться
	 сортировка элементов справочника;


	- [Структура](UiMd_reference_book_Master_Calculation_page1.htm).
	 Формируется структура справочника из простых и рекурсивных блоков;


	- [Уровни](UiMd_reference_book_Master_Calculation_page3.htm).
	 Формируется список уровней, которые в дальнейшем будут использоваться
	 для настройки агрегации данных;


	- [Макрос](UiMd_reference_book_Master_Calculation_page2.htm).
	 Указывается модуль с пользовательской процедурой, которая будет использоваться
	 для формирования дерева элементов справочника;


	- [Схемы отметки](../look-and-feel_Reference_book/UiMd_reference_book_look-and-feel_Scheme.htm). Задаются
	 схемы отметки для автоматизации выделения элементов справочника по
	 заданным правилам. Переход на страницу доступен после сохранения настроек
	 справочника;


	- [Группы элементов](../look-and-feel_Reference_book/UiMd_reference_book_look-and-feel_Group.htm). Определяются
	 группы элементов для ограничения списка доступных элементов справочника.
	 Переход на страницу доступен после сохранения настроек справочника;


Примечание.
 Страницы «Схемы отметки», «Группы элементов», «Альтернативные
 иерархии» доступны только в веб-приложении.


Для сохранения настроек в мастере справочника:


	- в веб-приложении:


		- нажмите кнопку «Сохранить»;


		- выполните команду «Сохранить
		 и закрыть» в раскрывающемся меню кнопки «Сохранить».
		 После этого будут сохранены заданные настройки, закрыт мастер
		 и выполнен переход в [навигатор
		 объектов](getstarted.chm::/Interface/Interface_Navigator.htm).


Примечание.
 Команда «Сохранить и закрыть»
 доступна только при [редактировании
 настроек](../Work/Work_Dictionary.htm#edit).


	- в настольном приложении нажмите кнопку «Готово».


См. также:


[Создание
 справочников](../Create.htm) | [Табличный
 справочник](../Master_Table_reference_book/Master_Table.htm) | [Календарный
 справочник](../Master_Calendar_reference_book/Master_Calendar.htm)


		Справочная
		 система на версию 10.9
		 от 18/08/2025,
		 © ООО «ФОРСАЙТ»,
