# Агрегация по показателям

Агрегация по показателям
-


# Агрегация по показателям


Метод агрегирует данные по значениям атрибутов временных рядов. Входит
 в группу «Агрегация».


Примечание.
 Агрегация по показателям доступна только в настольном приложении.


[![](../../../Opened.gif)![](../../../Closed.gif)Для применения
 метода](javascript:TextPopup(this))


		- Убедитесь, что [табличное представление](../../UiDw_Mode.htm)
		 данных отображается.


		- Выполните команду «Агрегация
		 по показателям» в раскрывающемся меню кнопки ![](b_aggr.gif) «Агрегация» на вкладке ленты
		 «Вычисления».


После применения метода будет отображен диалог «Агрегация»,
 предназначенный для настройки параметров расчёта. Например:


![](../DetermAggr_Window.gif)


Задайте параметры агрегации:


[![](../../../Opened.gif)![](../../../Closed.gif)Период
 расчета](javascript:TextPopup(this))


	Для задания периода расчета агрегации используйте группу параметров
	 «Период расчёта»:


		- Начало расчёта.
		 Способ вычисления начальной точки расчёта. По умолчанию используется
		 способ «Определенная дата»
		 и начальная точка расчёта совпадает с датой начала отображения
		 данных. Способы вычисления даты начала расчёта:


			- Определённая дата.
			 Дата указывается в редакторе дат, расположенном справа;


			- Сегодня +/-.
			 Дата равна текущему числу плюс число периодов, указанных в
			 редакторе чисел, расположенном справа;


			- От окончания расчёта.
			 Дата начала расчёта равна дате окончания расчёта плюс число
			 периодов, указанных в редакторе чисел, расположенном справа;


		- Окончание расчёта.
		 Способ вычисления конечной точки расчёта. По умолчанию используется
		 способ «Определенная дата»
		 и конечная точка расчёта совпадает с датой окончания отображения
		 данных. Способы вычисления даты окончания расчёта:


			- Определённая дата.
			 Дата указывается в редакторе дат, расположенном справа;


			- Сегодня +/-.
			 Дата равна текущему числу плюс число периодов, указанных в
			 редакторе чисел, расположенном справа;


			- От начала расчёта.
			 Дата окончания расчёта равна дате начала расчёта плюс число
			 периодов, указанных в редакторе чисел, расположенном справа.


[![](../../../Opened.gif)![](../../../Closed.gif)Выражение
 агрегации](javascript:TextPopup(this))


	Для задания выражения агрегации используйте группу параметров «Выражение»:


		- Измерение. Измерение,
		 по которому нужно выполнить агрегацию. Раскрывающийся список содержит
		 все измерения базы, кроме календарного, единиц измерения, ревизий
		 и мнемоник;


		- Значение. Выражение
		 агрегации. Наименования атрибутов указываются в фигурных скобках,
		 например: {BCI}+{BCA}.
		 Все допустимые выражения для агрегации отображаются в списке,
		 для вызова которого нажмите CTRL+Пробел;


		- Фильтр. Ограничение
		 на ряды, по которым будет выполнена агрегация. Работа с полем
		 ведется аналогично работе с цепочкой навигации в [дереве
		 рядов](../../../Purpose/UiDw_Purpose_Object.htm);


		- Динамика. Календарная
		 динамика для расчета агрегации.


[![](../../../Opened.gif)![](../../../Closed.gif)Метод
 расчета агрегации и его параметры](javascript:TextPopup(this))


	Для настройки метода расчета агрегации используйте следующие параметры:


		- Метод. В раскрывающемся
		 списке укажите метод агрегации;


		- Веса. Укажите выражение
		 для расчёта весов агрегации. Раскрывающийся список доступен, если
		 используется метод взвешенной агрегации (например, взвешенная
		 сумма). В списке содержатся элементы измерения, выбранного в поле
		 «Измерение»;


		- Игнорировать ряды с пустыми
		 весами. Установка флажка определяет, игнорировать ли ряды,
		 для которых веса пустые. Если ряды игнорируются, то расчет агрегации
		 занимает меньше времени. Флажок по умолчанию снят и доступен,
		 если используется метод взвешенной агрегации (например, взвешенная
		 сумма);


		- Уровень. Установка
		 флажка определяет, будет ли после расчета агрегации использоваться
		 метод «Уровень», сглаживающий
		 полученные данные. Особенности работы с флажком:


		-


			- флажок доступен, когда выбраны следующие методы или
			 их «взвешенные» аналоги:


				- веса;


				- взвешенное среднее геометрическое;


				- количество наблюдений;


				- количество пропусков;


				- сумма;


				- среднее;


				- медиана;


				- мода;


				- процентиль;


				- релевантность структуры;


			- флажок установлен автоматически и недоступен для снятия,
			 когда выбраны следующие методы или их «взвешенные» аналоги:


				- среднее, рассчитанное по процентному изменению;


				- среднее, рассчитанное по логарифмической разности;


				- медиана, рассчитанная по процентному изменению.


[![](../../../Opened.gif)![](../../../Closed.gif)Параметры
 перемещения данных с одной календарной динамики на другую](javascript:TextPopup(this))


	Для применения функции «Rebase»,
	 позволяющей «перебазировать» данные с одной динамики на другую установите
	 флажок «Перемещение».


	Примечание.
	 Флажок «Перемещение» доступен
	 в тех же случаях, что и флажок «Уровень»,
	 задающий [параметры метода расчета агрегации](#method).


	Задайте дополнительные параметры перемещения:


		- Динамика. Календарная
		 динамика для расчета функции «Rebase».
		 Доступна для изменения, если динамика агрегации отлична от годовой
		 динамики.

		Функция «Rebase» может
		 быть применена для годовой динамики или динамик с более низкой
		 частотой, но не меньше динамики расчета агрегации. Например, используется
		 квартальная динамика расчета агрегации. Таким образом, в раскрывающемся
		 списке «Динамика» будут
		 доступны только варианты «Годовая»,
		 «Полугодовая» и «Квартальная»;


		- Базовый период.
		 Определяет период для расчета функции «Rebase».
		 Формат задания периода зависит от указанной динамики. Например,
		 если выбрана динамика «Годовая»,
		 то задать можно будет только год, в случае если выбрана динамика
		 «Полугодовая», то необходимо
		 задать полугодие и год и т.д. Если поле «Динамика»
		 в группе «Перемещение»
		 недоступно, то формат периода зависит от поля «Динамика»
		 в группе «Выражение».


[![](../../../Opened.gif)![](../../../Closed.gif)Параметры
 релелевантности агрегации](javascript:TextPopup(this))


	Для задания релевантности агрегации с учетом пропусков в данных
	 используйте группу параметров «Релевантность
	 структуры»:


		- Порог. Определяет
		 значение порога для расчета релевантности агрегации. Диапазон
		 допустимых значений: [0, 100]. Если порог равен нулю, то это приводит
		 к расчету агрегации без учета пропусков. Если порог равен ста,
		 то при расчете агрегации все пропуски учитываются. Значение больше
		 нуля, но меньше ста означает, что пропуски учитываются согласно
		 установленному порогу;


		- Блок сравнения.
		 Блок сравнения для расчета релевантности агрегации. Содержит список
		 элементов измерения, выбранного в поле «Измерение»
		 при настройке [выражения агрегации](#expression).


	Релевантность рассчитывается следующим образом: если сумма значений
	 элемента «Блок сравнения»,
	 разделенная на сумму всех значений, меньше значения «Порог»,
	 то агрегация не будет рассчитываться.


[![](../../../Opened.gif)![](../../../Closed.gif)Параметры
 использования общего периода данных](javascript:TextPopup(this))


	Общий период - это период, на котором у всех агрегируемых рядов
	 есть данные. Для расчета агрегации на общем периоде данных установите
	 флажок «Использование общего периода»
	 и задайте следующий параметр:


		- Минимальное количество
		 наблюдений. Флажок определяет, накладывается ли ограничение
		 на минимальное количество наблюдений в общем периоде. По умолчанию
		 флажок снят и ограничение не накладывается.

		Если флажок установлен, то задайте минимальное число наблюдений
		 в соответствующем редакторе значений. По умолчанию общий период
		 должен содержать минимум три наблюдения.


	По умолчанию флажок «Использование
	 общего периода» снят и агрегация рассчитывается на периоде
	 модели.


[![](../../../Opened.gif)![](../../../Closed.gif)Параметры
 расчета агрегации с учетом иерархии данных](javascript:TextPopup(this))


	Для расчета агрегации с учетом иерархии данных установите флажок
	 «Учет иерархии» и задайте
	 следующие параметры:


		- Вся иерархия. Используется
		 по умолчанию. Агрегация рассчитывается по всем уровням иерархии;


		- Только первый уровень.
		 Агрегация рассчитывается только на один уровень вниз по иерархии;


		- Учитывать исходный элемент.
		 По умолчанию флажок снят и исходный элемент не учитывается в агрегации.
		 Если флажок установлен, то исходный элемент учитывается в агрегации.


	Примечание.
	 В расчете агрегации с учетом иерархии принимают участие все иерархические
	 измерения.


	По умолчанию флажок «Учет иерархии»
	 снят и расчет ведется без учета иерархии.


Если формула задана верно, то при нажатии кнопки «OK»
 диалог «Агрегация» будет закрыт,
 в рабочую книгу будет добавлен вычисляемый ряд с наименованием «Агрегация: Расширенная», содержащий
 результаты расчета.


## Настройка параметров расчёта


Для настройки специфических параметров агрегации используйте вкладки
 на боковой панели:


	- [Параметры](Panel_param_aggr.htm).
	 Позволяет изменить базовые настройки агрегации: выражение агрегации,
	 метод расчёта и так далее;


	- [Параметры
	 сглаживания](Panel_SmoothingParams.htm). Позволяет включить/отключить применение метода
	 «Уровень», функции «Rebase», изменить параметры релевантности
	 агрегации.


См. также:


[Работа
 с вычисляемыми рядами](../../UiDw_ComputedSeries.htm) | [Методы расчёта
 агрегации](Lib.chm::/03_Transformations/UiModelling_Aggr.htm) | [Пример настройки
 расчета агрегации](../UiDw_CalcSer_DetermAggregation_expl.htm) | Контейнер
 моделирования: [модель
 расширенной агрегации](UiModelling.chm::/2_Container_of_Modeling/2_3_Work_object/2_3_2_Model/Specification/aggregation/UiModelling_Aggregation_Attr_CrossDim.htm)


		Справочная
		 система на версию 10.9
		 от 18/08/2025,
		 © ООО «ФОРСАЙТ»,
