# Пример создания компонента RatingChart

Пример создания компонента RatingChart
-


# Пример создания компонента RatingChart


Для выполнения примера необходимо создать html-страницу и выполнить
 следующие действия:


1. Добавить ссылку на css-файл PP.css.


Также нужно добавить ссылки на следующие js-файлы: PP.js, PP.GraphicsBase.js,
 PP.Charts.js, dataSource.js и resources.ru.js.


Файл DataSource.js определяет переменную с наименованием «dataSource»,
 содержащую источник данных для компонента [PP.Ui.RatingChart](RatingChart.htm).


[![](../../Opened.gif)![](../../Closed.gif)Содержимое файла
 DataSource.js](javascript:TextPopup(this))


var settings = {
    "Id": "DataSource1", // Идентификатор диаграммы
    "Title": "DataSource with custom attributes", // Заголовок диаграммы
    /* Определим наименования атрибутов */
    "AttributesNames": {
        "FACT": "Факт",
        "PLAN": "План"
    },
    /* Определим наименования рядов данных */
    "ItemsNames": {
        "ARG": "Аргентина",
        "BLV": "Боливия",
        "BRA": "Бразилия",
        "CO": "Колумбия",
        "CHL": "Чили"
    },
    /* Определим данные рядов */
    "Series": {
        "ARG": {
            "FACT": {
                "Items": "6040.37 5704.24 8609.72 2613.11 907.68 6387.95" +
                " -431.69 8471.07 2448.14 7166.83 5714.23 null null 8388.79" +
                " 8088.66 742.70 1411.16 null 3890.94 1190.58 -293.99 null 474.51"
            },
            "PLAN": {
                "Items": "4012.37 5304.24 8809.72 2633.11 902.68 6387.95" +
                " -331.69 9471.07 3448.14 5166.83 5814.23 null null 8388.79" +
                " 8988.66 772.70 1511.16 null 3990.94 1290.58 -293.99 null 474.51"
            }
        },
        "BLV": {
            "FACT": {
                "Items": "4117.76 560.92 null 6952.83 8826.52 1214.61 3877.78" +
                " 4124.18 4484.09 1185.55 null 2533.33 3898.37 3784.63" +
                " 7567.07 null null 1678.77 1229.01 2340.16 4165.58 2639.65 5399.93"
            },
            "PLAN": {
                "Items": "1182.23 540.92 null 6432.83 8026.52 1014.61 3477.78" +
                " 4924.18 1684.09 1985.55 null 2833.33 3198.37 3584.63" +
                " 7537.07 null null 2678.77 7229.01 4340.16 3165.58 5639.65 8399.93"
            }
        },
        "BRA": {
            "FACT": {
                "Items": "2284.87 8858.41 1980.05 8147.34 null 7726.42 4963.13" +
                " 7302.01 4962.50 6065.21 4287.92 2079.64 39.45 8559.76" +
                " 1247.91 5395.11 1014.04 3955.42 1715.92 8251.52 -256.13 2469.22 8387.14"
            },
            "PLAN": {
                "Items": "7316.34 6858.41 5080.05 4247.34 null 3026.42 8163.13" +
                " 3002.01 5062.50 7165.21 9287.92 3079.64 199.45 8359.76" +
                " 1847.91 5345.11 1034.04 3975.42 1755.92 8201.52 -246.13 2769.22 8987.14"
            }
        },
        "CO": {
            "FACT": {
                "Items": "-5633.42 -2015.16 -5128.10 -2082.52 -3443.03 -485.17" +
                " -3412.89 -5680.04 -1628.96 -1123.42 8107.16 7116.04 null 4581.98" +
                " 5971.73 -2541.39 null null 7327.01 -1494.33 null null 5556.07"
            },
            "PLAN": {
                "Items": "1674.02 -1015.16 -2128.10 -8082.52 -9443.03 -185.17" +
                " -1412.89 -6280.04 -2128.96 -1023.42 6207.16 5216.04 null 3881.98" +
                " 2671.73 441.39 null null 327.01 94.33 null null 2556.07"
            },
        },
        "CHL": {
            "FACT": {
                "Items": "-2349.98 -8062.53 -833.21 -2405.42 -278.99 -7805.29 -3565.27" +
                " -675.24 -4700.00 -8678.50 -6034.09 null -8644.67 -4926.28" +
                " -7060.34 -8702.56 -4166.20 null -5649.10 null 6431.62 -5525.61 -5843.48"
            },
            "PLAN": {
                "Items": "3399.17 -2062.53 -633.21 -2305.42 -279.99 -7005.29 -3165.27" +
                " -695.24 -4723.00 -7628.50 -6134.09 null -8864.67 -4116.28" +
                " -7010.34 -8785.56 -4086.20 null -5939.10 null 6721.62 -5655.61 -5133.48"
            }
        }
    }
};
// Определим источник данных
var dataSource = new PP.DataSource(settings);


2. Далее в теге <head> необходимо добавить сценарий, создающий
 рейтинговую диаграмму:


<script type="text/javascript">
    var ratingChart; // Рейтинговая диаграмма
    function createRatingChart() {
        // Укажем путь к корневой папке, содержащей файлы ресурсов
        PP.resourceManager.setRootResourcesFolder("../resources/");
        // Установим языковые настройки для ресурсов
        PP.setCurrentCulture(PP.Cultures.ru);
        // Создадим временную шкалу
        var timeline = new PP.Ui.Timeline({
            ParentNode: "timeline", // Идентификатор родительского элемента
            ImagePath: "../build/img/", // Путь к папке с пиктограммами
            Width: 500, // Ширина шкалы
            CurrentStep: 0, // Шаг шкалы
            Slider: { // Деления шкалы
                Ticks: ["2007", "2006", "2005", "2004", "2003", "2002", "2001", "2000",
                   "1999", "1998", "1997", "1996", "1995", "1994", "1993", "1992",
                   "1991", "1990", "1989", "1988", "1987", "1986", "1985", "None"]
            }
        });

        /* Создадим рейтинговую диаграмму */
        ratingChart = new PP.Ui.RatingChart({
            AllowMultipleSelection: false, // Запретим множественное выделение элементов
            ParentNode: "ratingChart", // Идентификатор родительского элемента
            ImagePath: "../build/img/", // Путь к папке с пиктограммами
            DataSource: dataSource, // Установим источник данных
            Timeline: timeline, // Указываем временную шкалу
            NumberFormat: "#,##0.00", // Формат данных
            TrendLine: { // Задаём линию тренда
                LineType: PP.Ui.LineTypes.ShortDashDotDot, // Тип линии
                LineWidth: 2, // Толщина линии тренда
                LineColor: "#AA3333", // Цвет линии
                Value: 100 // Значение, соответствующее линии тренда
            },

            ColumnSpacing: 0, // Расстояние между столбцами
            MinColumnWidth: 30, // Минимальная ширина столбцов
            SplittedTop: 2, // Количество отображаемых над разделителем рядов данных при первой отрисовке диаграммы
            UseAnimation: true, // Разрешим использование анимации
            ShowValueTimeout: 800, // Длительность анимации изменения диаграммы
            MoveItemsTimeout: 800, // Длительность анимации изменения порядка рядов данных
            DelayDuration: 1500, // Длительность задержки анимации смены шага временной шкалы
            MoveActiveToEnd: true, // Разрешим автоматический перенос активного столбца значений в конец
            AreDataColumnsResizable: true, // Разрешим изменение ширины столбцов значений с помощью мыши
            Height: 250,
            Width: 500
        });
    };
</script>
3. В теге <body> в качестве значения атрибута «onLoad» указать
 имя функции для создания рейтинговой диаграммы. Внутри данного тега разместить
 блок с идентификатором «ratingChart» для хранения созданной рейтинговой
 диаграммы и блок с идентификатором «timeline» для хранения временной шкалы:


<body onload="createRatingChart()">
    <div style="border: #CCCCCC 1px solid; padding: 1px; margin: 1px; width: 512px">
        <div style="border: #CCCCCC 1px solid; margin: 5px; width: 500px " id="ratingChart">
        </div>
        <div id="timeline" style="height: 80px;"></div>
    </div>
</body>

Для выполнения пользовательских сценариев над рейтинговой диаграммой,
 в том числе примеров, приведённых на страницах описания свойств, методов
 и событий данного компонента и составляющих его элементов, требуется разместить
 код либо после указанного выше сценария, либо в консоли браузера.


4. В конце документа вставить код, устанавливающий стили к вершине
 «document.body», соответствующие операционной системе клиента:


<script type="text/javascript">
    PP.initOS(document.body);
</script>
В результате выполнения примера на html-странице будет размещен компонент
 [PP.Ui.RatingChart](RatingChart.htm):


![](RatingChart.png)


См. также:


[RatingChart](RatingChart.htm)


		Справочная
		 система на версию 10.9
		 от 18/08/2025,
		 © ООО «ФОРСАЙТ»,
