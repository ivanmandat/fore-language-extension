# Collapse

Collapse
-


# Collapse


## Синтаксис


Collapse(Input: [ITimeSeries](kems.chm::/interface/ITimeSeries/ITimeSeries.htm),

         Method: [MsCollapseType](kems.chm::/Enums/MsCollapseType.htm),

         TargetFrequency:
 [MsFrequency](kems.chm::/Enums/MsFrequency.htm),

         MissingData: [MissingDataMethod](StatLib.chm::/Enums/MissingDataMethod.htm),

         NumberOfPoints: Integer,

         SpecifiedValue: Double,

         AdditionalSeries:
 [ITimeSeries](kems.chm::/interface/ITimeSeries/ITimeSeries.htm))


## Параметры


Input. Исходная переменная;


Method. Метод агрегации;


TargetFrequency. Результирующая
 динамика;


MissingData. Метод обработки
 пропусков. Необязательный параметр. По умолчанию параметр имеет значение
 MissingDataMethod.None - обработка
 пропусков не используется;


NumberOfPoints. Дополнительный
 параметр для метода обработки пропусков. Может принимать только положительные
 значения. Необязательный параметр. По умолчанию параметр равен 1;


SpecifiedValue. Значение, которым
 будут заполняться пропуски методом MissingDataMethod.SpecifiedValue
 «Указанное значение». Необязательный
 параметр. По умолчанию параметр равен 0;


AdditionalSeries. Ряд, который
 используется для заполнения пропусков методами MissingDataMethod.Pattern
 «По шаблону» и MissingDataMethod.Overlay
 «Значениями заданного ряда».
 Необязательный параметр. По умолчанию параметр имеет значение Null.


## Описание


Осуществляет агрегацию значений переменной.


## Комментарии


Данная функция выполняет агрегацию данных с нижнего уровня на верхний
 и необходим при расчёте задачи, требующей агрегации данных. Например,
 данные, рассчитанные по месяцам, необходимо просуммировать для квартальной
 динамики.


При агрегации данных учитываются настройки календарной динамики: смещение
 начала периода относительно его начала/конца.


[![](../../../Opened.gif)![](../../../Closed.gif)Пример агрегации
 данных с дневной на недельную динамику](javascript:TextPopup(this))


	Рассматриваемый период: первые две недели мая 2012 г.


	Метод агрегации: сумма.


	Настройки календарной динамики: исходная переменная содержит недельную
	 и дневную динамки; смещение начала недели не применяется; дневная
	 динамика содержит дни с понедельника по пятницу. Результат агрегации:


			 Неделя
			 Дата начала периода
			 День недели


			 Исходное значение


			 Рассчитанное значение


			 1-я неделя
			 7 мая 2012
			 Понедельник

			 0,50


			 7 мая 2012
			 Понедельник
			 0,10


			 8 мая 2012
			 Вторник
			 0,10


			 9 мая 2012
			 Среда
			 0,10


			 10 мая 2012
			 Четверг
			 0,10


			 11 мая 2012
			 Пятница
			 0,10


			 2-я неделя
			 14 мая 2012
			 Понедельник

			 1,00


			 14 мая 2012
			 Понедельник
			 0,20


			 15 мая 2012
			 Вторник
			 0,20


			 16 мая 2012
			 Среда
			 0,20


			 17 мая 2012
			 Четверг
			 0,20


			 18 мая 2012
			 Пятница
			 0,20


	Настройки календарной динамики: исходная переменная содержит недельную
	 и дневную динамки; начало недели смещено на три дня вперед; дневная
	 динамика содержит дни с понедельника по пятницу. Результат агрегации:


			 Неделя
			 Дата начала периода
			 День недели


			 Исходное значение


			 Рассчитанное значение


			 1-я неделя
			 2 мая 2012
			 Среда

			 0,50


			 2 мая 2012
			 Среда
			 0,10


			 3 мая 2012
			 Четверг
			 0,10


			 4 мая 2012
			 Пятница
			 0,10


			 7 мая 2012
			 Понедельник
			 0,10


			 8 мая 2012
			 Вторник
			 0,10


			 2-я неделя
			 9 мая 2012
			 Среда

			 1,00


			 9 мая 2012
			 Среда
			 0,20


			 10 мая 2012
			 Четверг
			 0,20


			 11 мая 2012
			 Пятница
			 0,20


			 14 мая 2012
			 Понедельник
			 0,20


			 15 мая 2012
			 Вторник
			 0,20


Параметр NumberOfPoints используется
 для следующих методов обработки пропусков:


		- MissingDataMethod.NPointsAverage.
		 «Среднее по N соседним точкам».
		 Параметр определяет количество соседних точек;


		- PreviousGrowthRate,
		 SucceedingGrowthRate.
		 «Темп роста к предыдущему периоду»,
		 «Темп роста к следующему периоду».
		 Параметр определяет число периодов.


## Пример


		 Формула
		 Результат
		 Применение


		 = Collapse({Brazil|BCA}, MsCollapseType.Total,
		 MsFrequency.Annual, MissingDataMethod.NPointsAverage, 4)
		 Для временного ряда Brazil|BCA
		 будет произведена агрегация данных на годовую динамику методом
		 суммирования с применением обработки пропусков методом «Среднее по N соседним точкам»,
		 где N = 4.
		 Можно использовать в формулах вычисляемых рядов базы данных
		 временных рядов и в формулах моделей контейнера моделирования,
		 основанных на атрибутах.


		 = Collapse(X1, MsCollapseType.Average, MsFrequency.Annual,
		 MissingDataMethod.LinTrend)
		 Для фактора X1 будет
		 произведена агрегация данных на годовую динамику методом вычисления
		 среднего значения с применением метода обработки пропусков «Линейный тренд».
		 Можно использовать в формулах моделей контейнера моделирования,
		 основанных на переменных.


См. также:


[Функции, доступные в редакторе
 выражения](../../Expression_editor_func.htm) │ [Агрегация](Func_Aggregation.htm) │ [IModelling.Collapse](kems.chm::/interface/imodelling/imodelling.collapse.htm)


		Справочная
		 система на версию 10.9
		 от 18/08/2025,
		 © ООО «ФОРСАЙТ»,
