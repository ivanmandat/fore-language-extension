# Особенности разбора выражений агрегации

Особенности разбора выражений агрегации
-


# Особенности разбора выражений агрегации


Выражения агрегации определяются следующими свойствами:


	- [IMsCrossDimensionAggregationTransform.AppliesToExpression](IMsCrossDimensionAggregationTransform.AppliesToExpression.htm);


	- [IMsCrossDimensionAggregationTransform.CompositionRelevanceExpression](IMsCrossDimensionAggregationTransform.CompositionRelevanceExpression.htm);


	- [IMsCrossDimensionAggregationTransform.Expression](IMsCrossDimensionAggregationTransform.Expression.htm);


	- [IMsCrossDimensionAggregationTransform.WeightsExpression](IMsCrossDimensionAggregationTransform.WeightsExpression.htm).


Допустим, в базе данных временных рядов N
 идентифицирующих измерений, а в фильтре агрегации заданы M
 из них.


При задании элемента в выражении разрешено использовать N,
 N+1, N-M или N-M+1 частей:


	- при указании N частей
	 считается, что пользователь специфицировал все измерения и для этого
	 элемента фильтр не используется. Пример: {Albania|BCA} или {{Country}|BCA}
	 (с параметром);


	- при указании N+1 частей
	 считается, что пользователь специфицировал все измерения + уровень
	 календаря. Для этого элемента фильтр не используется. Пример: {Albania|BCA|Q};


	- при указании N-M частей считается, что пользователь
	 специфицировал только те измерения, которые не входят в фильтр. Пример:
	 {BCA}, фильтр содержит измерение Country;


	- при указании N-M+1 частей считается, что пользователь
	 специфицировал только те измерения, которые не входят в фильтр + уровень
	 календаря. Пример: {BCA|Q}, фильтр содержит измерение Country;


	- если M=1, а в элементе
	 указаны N частей, то сначала
	 будет произведена попытка разбора варианта «а». Если она неуспешна,
	 будет произведена попытка разбора варианта «d». Здесь есть «подводный
	 камень» - если последнее заданное измерение содержит элементы «A»,
	 «S», «Q», «M», «W», «D», то специфицировать измерение календаря будет
	 нельзя, т.к. разбор пойдет по варианту «а»;


	- в остальных случаях генерируется ошибка.


Если N = M,
 то для задания элемента из фильтра применяется символ X.


В случае, если для задания выражения агрегации разбор не
 используется (отметка у элементов задается вручную), нужно пользоваться
 следующими правилами:


	- по измерениям, отсутствующим в фильтре агрегации, должна быть
	 проставлена единичная отметка;


	- для измерений, которые присутствуют в фильтре:


	-


		- задана пустая отметка. При расчете будет использоваться
		 отметка из фильтра;


		- задана единичная отметка. Считается, что пользователь специфицировал
		 все измерения и для этого элемента фильтр не используется.


См. также:


[IMsCrossDimensionAggregationTransform](IMsCrossDimensionAggregationTransform.htm)


		Справочная
		 система на версию 10.9
		 от 18/08/2025,
		 © ООО «ФОРСАЙТ»,
