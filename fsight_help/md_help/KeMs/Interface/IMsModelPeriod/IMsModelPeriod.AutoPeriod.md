# IMsModelPeriod.AutoPeriod

IMsModelPeriod.AutoPeriod
-


# IMsModelPeriod.AutoPeriod


## Синтаксис


AutoPeriod: Integer;


## Описание


Свойство AutoPeriod определяет
 условия, которые используются для вычисления дат начала/окончания периодов
 идентификации и прогнозирования.


## Комментарии


Значение определяется комбинаций элементов перечисления [MsAutoPeriodOptions](../../Enums/MsAutoPeriodOptions.htm). AutoPeriod
 учитывается, если для свойства [IMsModel.UseModelPeriod](../IMsModel/IMsModel.UseModelPeriod.htm)
 установлено значение True.


Если AutoPeriod использует значение
 перечисления MsAutoPeriodOptions,
 требующее задания дополнительного числа периодов, например, MsAutoPeriodOptions.IdentStartByIdentEnd
 или MsAutoPeriodOptions.ForecastEndByFact,
 то задайте дополнительные параметры в соответствующем свойстве:


	- [IMsModelPeriod.ForecastEndOffset](IMsModelPeriod.ForecastEndOffset.htm);


	- [IMsModelPeriod.ForecastStartOffset](IMsModelPeriod.ForecastStartOffset.htm);


	- [IMsModelPeriod.IdentificationEndOffset](IMsModelPeriod.IdentificationEndOffset.htm);


	- [IMsModelPeriod.IdentificationStartOffset](IMsModelPeriod.IdentificationStartOffset.htm).


[![](../../opened.gif)![](../../closed.gif)Особенности
 вычисления дат начала/окончания периодов идентификации и прогнозирования](javascript:TextPopup(this))


		- При формировании периодов идентификации и прогнозирования
		 с использованием фактических данных учитывается специфика моделей:


		-


			- Фактические данные входного ряда для формирования периода
			 идентификации берутся из исходной переменной для моделей:
			 линейная регрессия (МНК, метод инструментальных переменных),
			 модель бинарного выбора, нелинейная регрессия, тренд с подбором
			 функциональной зависимости, все методы сглаживания, ARIMA,
			 модель коррекции ошибок, методы накопления, модель обработки
			 пропусков;


			- Для методов коллапс (векторный расчет), коллапс (поточечный
			 расчет), интерполяция фактические данные входного ряда для
			 формирования периода идентификации берутся из исходной переменной,
			 по исходной динамике;


			- Если модель не подразумевает наличие исходной переменной
			 (например, в детерминированном уравнении и пользовательских
			 методах), то начало периода идентификации равняется минимальной
			 дате, соответствующей первым непустым значениям операндов
			 модели, окончание периодов идентификации и прогнозирования
			 формируется исходя из максимальной даты, соответствующей последним
			 непустым значениям операндов модели;


			- Для модели «Агрегация» границы периодов идентификации
			 и прогнозирования формируются на основе моделируемой переменной
			 (если в переменной не было срезов), или исходя из значений
			 переменной по срезам (если переменная со срезами);


			- Для моделей, которые позволяют использовать в качестве
			 моделируемой/исходной переменной и факторов пустые ряды,
			 не содержащие данных, даты начала и конца идентификации и
			 конца прогнозирования устанавливаются равными дате начала
			 календаря контейнера моделирования;


			- При расчете даты окончания периода прогнозирования равной
			 последней фактической дате факторов модели учитываются данные
			 моделируемой переменной. Если дата окончания периода
			 прогнозирования меньше, чем дата начала периода прогнозирования,
			 то в качестве даты окончания периода прогнозирования устанавливается
			 дата конца периода идентификации;


			- Для моделей «Агрегация (расширенная)» и «Агрегация (базовая)»
			 под каталогом показателей условия задания периодов идентификации
			 и прогнозирования по фактическим данным переменных не используются.
			 Остальные условия реализуются так же как для обычных моделей;


			- Для систем нелинейных уравнений, модели межотраслевого
			 баланса, векторной модели коррекции ошибок, модели на панельных
			 данных, модели Value-at-Risk условия задания периодов идентификации
			 и прогнозирования по фактическим данным переменных не используются.
			 Остальные условия реализуются так же как для обычных моделей;


			- Если модель имеет сквозное измерение, то период расчёта
			 для нее формируется по первому элементу измерения;


		- При формировании периодов с использованием дат начала/окончания
		 идентификации/прогнозирования учитываются настройки календарной
		 динамики: смещение начала периода относительно его начала/конца;


		- Если при формировании периодов используется текущая дата,
		 то даты окончания идентификации и прогнозирования смещаются на
		 конец периода. Актуально для динамик от месячной и выше.

		Например, дата окончания идентификации - апрель 2012 (IdentEndAsNow),
		 а дата окончания расчёта равняется дате окончания идентификации
		 (ForecastEndByIdentEnd).
		 Таким образом, при вычислении модели дата окончания расчёта -
		 30.04.2012.


## Пример


Для выполнения примера предполагается наличие контейнера моделирования
 с идентификатором MS, содержащего модель с идентификатором MODEL.


Добавьте ссылки на системные сборки: Metabase, Ms.


			Sub UserProc;

Var

    mb: IMetabase;

    MsKey: Integer;

    ModelObj: IMetabaseObject;

    Model: IMsModel;

    ModelPeriod: IMsModelPeriod;

Begin

    // Получаем текущий репозиторий

    mb := MetabaseClass.Active;

    // Получаем модель

    MsKey := mb.ItemById("MS").Key;

    ModelObj := mb.ItemByIdNamespace("MODEL", MsKey).Edit;

    Model := ModelObj As IMsModel;

    Model.UseModelPeriod := True;

    // Получаем периоды модели

    ModelPeriod := Model.Transform.Period;

    // Задаём условия периода расчёта

    ModelPeriod.AutoPeriod := MsAutoPeriodOptions.IdentStartAsNow +

        MsAutoPeriodOptions.IdentEndAsNow +

        MsAutoPeriodOptions.ForecastStartAsNow +

        MsAutoPeriodOptions.ForecastEndByIdentEnd;

    ModelPeriod.IdentificationStartOffset := -10;

    ModelPeriod.IdentificationEndOffset := -1;

    ModelPeriod.UseForecastStart := True;

    ModelPeriod.ForecastStartOffset := 1;

    ModelPeriod.ForecastEndOffset := 5;

    // Сохраняем изменения

    ModelObj.Save;

End Sub UserProc;


После выполнения примера будут заданы условия, определяющие периоды
 расчета модели:


	- начало периода идентификации: текущая дата минус десять периодов;


	- окончание периода идентификации: текущая минус один период;


	- начало периода прогнозирования: текущая дата плюс один период;


	- окончание периода прогнозирования: окончание идентификации плюс
	 пять периодов.


См. также:


[IMsModelPeriod](IMsModelPeriod.htm)


		Справочная
		 система на версию 10.9
		 от 18/08/2025,
		 © ООО «ФОРСАЙТ»,
