# Сервер состояний

Сервер состояний
-


# Сервер состояний


Для повышения отказоустойчивости в каждой [конфигурации](../../../GeneralInfo.htm#prod)
 может быть реализован [кластер
 BI-серверов](../Cluster/Cluster_Of_BI_Server.htm). При использовании двух и более BI-серверов рекомендуется
 добавлять в конфигурацию сервер состояний, с помощью которого будут восстанавливаться
 параметры объектов в случае сбоя BI-сервера, к которому выполняется запрос.


Примечание.
 Сервер состояний не входит в [комплект
 поставки продукта «Форсайт. Аналитическая платформа»](../../../02_AK_Install/DistributionKit.htm).


В качестве сервера состояний платформа поддерживает работу с Redis и
 Memcached. Для работы сервера состояний на базе Memcached требуются библиотеки
 [OpenSSL](https://www.openssl.org/).


Для использования в платформе сервера состояний необходимо задать дополнительные
 настройки. Обратитесь к требуемому подразделу:


	- [Настройка сервера состояний на базе Redis](Redis.htm);


	- [Настройка сервера состояний на базе
	 Memcached](Memcached.htm).


Для настройки аутентификации на сервере состояний обратитесь к разделу
 «[Настройка аутентификации
 на сервере состояний](Settings_Authentication_State_Server.htm)».


При работе BI-сервера, после выполнения запросов на изменение объектов,
 их состояния (моникёр и параметры, необходимые для восстановления объекта)
 будут сохраняться на сервере состояний и загружаться оттуда при последующем
 обращении к объектам. Сохранение состояний поддерживают менеджер безопасности
 и различные объекты репозитория.


[![](../../../Opened.gif)![](../../../Closed.gif)Список объектов, поддерживающих сохранение
 состояния](javascript:TextPopup(this))


		- [настройки
		 подключения к репозиторию](../../../06_AK_Client_Config/UiNav_RepoConfig_repo1.htm) и [связей
		 с репозиториями](UiNavObj.chm::/Link_with/UiDb_relational_LinkWith.htm) (описание репозитория и учетные
		 данные, использованные при подключении);


		- [экспресс-отчёты](UIExpress.chm::/purpose/UiExpress_Purpose.htm);


		- [аналитические
		 панели](UIAdhoc.chm::/UiAdhoc_Purpose.htm);


		- [регламентные
		 отчёты](UIReport.chm::/UiReport_purpose.htm);


		- [рабочие
		 книги](UiDw.chm::/UiDw_Title.htm);


		- [наборы
		 данных](UiNavObj.chm::/Table/Master/object_type_page.htm);


		- все типы [справочников](uinavobj.chm::/reference_book/Create.htm),
		 а также связанные с ними объекты (схемы отметок, группы элементов,
		 альтернативные иерархии);


		- [кубы](UiNavObj.chm::/Cube/CreateCube/UiMd_Cube_CreateCube.htm)
		 и [базы
		 данных временных рядов](UiNavObj.chm::/TimeSeriesDatabase/CreateTimeSeriesDatabase.htm);


		- [задача
		 ETL](UiETL.chm::/desktop/01_General_Info/UiETL_General.htm);


		- [рабочее
		 пространство](UiWsp.chm::/1_intro/UiWsp_Intro.htm);


		- [формы
		 ввода](DataEntryForms.chm::/DataEntryForms_Purpose.htm), [алгоритмы расчёта](CalculationAlgorithm.chm::/Purpose.htm), [управление
		 бизнес-процессами](BPM.chm::/Modeling_of_business_processes.htm), [конструкторы
		 бизнес-приложений](Constructor.chm::/Intro/Designer_business_applications.htm);


		- [команды
		 СУБД](UiNavObj.chm::/CUBD/UiDb_relationa_CUBD.htm), [процедуры](UiNavObj.chm::/procedure/UiDb_relationa_procedure.htm);


		- объекты указанных выше типов, созданные в памяти BI-сервера,
		 но еще не сохранённые в репозиторий.


## Рекомендации


Для обеспечения бесперебойной работы BI-сервера в первую очередь убедитесь,
 что сервер состояний доступен. Для настройки и запуска сервера состояний
 используйте рекомендации, предоставляемые разработчиками Redis/Memcached
 в соответствии с масштабами создаваемой системы.


## Проблемы при работе


При возникновении проблем во время взаимодействия платформы и сервера
 состояний, обрыве связи, зависании какого-либо компонента системы, исследуйте
 лог как BI-сервера, так и сервера состояний. При сложностях с решением
 проблем обращайтесь в техническую поддержку по адресу [support@fsight.ru](mailto:support@fsight.ru)
 или через [сервисы
 технической поддержки](https://www.fsight.ru/support/), которые доступны после регистрации на сайте.


Известные проблемы:


[![](../../../Opened.gif)![](../../../Closed.gif)Сервер состояний MemCached недоступен](javascript:TextPopup(this))


	Описание


	При выполнении каких-либо действий в платформе появляется ошибка
	 «Сервер состояний MemCached недоступен. Проверьте настройки подключения
	 к серверу состояний».


	Причина


	По умолчанию MemCached использует фрагменты памяти, в которых сохраняется
	 информация, размером 1 мегабайт.


	В платформе при формировании блока информации, сохраняемой на сервер
	 состояний MemCached и необходимой для восстановления объекта, полученный
	 объем блока превышает 1 мегабай.


	Решение


	Для изменения размера фрагмента памяти используйте при запуске MemCached
	 ключ «-I <N байт>», также можно использовать суффиксы K и M
	 для указания объема в килобайтах или мегабайтах.


	Не рекомендуется без необходимости увеличивать размер фрагмента
	 памяти, так как это напрямую влияет на производительность системы
	 и требуемый для работы объем памяти.


	Пример:


	MemCached -I 2M


См. также:


[BI-сервер](../../UiWebSetup_TitlePage.htm)
 | [Создание кластера BI-серверов](../Cluster/Cluster_Of_BI_Server.htm)


		Справочная
		 система на версию 10.9
		 от 18/08/2025,
		 © ООО «ФОРСАЙТ»,
