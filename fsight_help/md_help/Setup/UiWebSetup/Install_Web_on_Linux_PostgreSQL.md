# Установка веб-приложения «Форсайт. Аналитическая платформа» в ОС Linux (СУБД PostgreSQL)

Установка веб-приложения «Форсайт. Аналитическая платформа» в ОС Linux (СУБД PostgreSQL)
-


# Установка веб-приложения «Форсайт. Аналитическая платформа»
 в ОС Linux (СУБД PostgreSQL)


Установка веб-приложения «Форсайт. Аналитическая платформа»
 в ОС Linux выполняется с помощью специального скрипта, который позволяет
 автоматически устанавливать компоненты веб-приложения с использованием
 СУБД PostgreSQL.


Скрипт доступен для следующих версий ОС семейства Linux:


	- install_astrase1.7.sh для Astra Linux SE 1.7;


	- install_redos7.3.sh для РЕД ОС 7.3;


	- install_rocky8.sh для Rocky Linux 8;


	- install_alt10.sh для ALT Linux 10.


Примечание.
 Для получения скрипта обратитесь в техническую поддержку по адресу [support@fsight.ru](mailto:support@fsight.ru) или через [сервисы технической
 поддержки](https://www.fsight.ru/support/), которые доступны после регистрации на сайте.


Для установки веб-приложения:


	- Раздайте права доступа на выполнение скрипта от имени пользователя
	 root. Вместо подстановки <наименование скрипта> укажите наименование скрипта
	 без расширения в соответствии с версией ОС:


chmod
 +x <наименование скрипта>.sh


Пример команды для Astra Linux SE 1.7:


chmod
 +x install_astrase1.7.sh


	- Запустите скрипт. Вместо подстановки <наименование скрипта> укажите наименование скрипта
	 без расширения в соответствии с версией ОС:


./<наименование
 скрипта>.sh


Примечание.
 В скрипте содержатся преднастроенные параметры веб-приложения со значениями,
 заданными по умолчанию. Ознакомьтесь со [списком
 параметров веб-приложения](#parameters) и при необходимости измените значения по
 умолчанию до запуска скрипта.


После выполнения действия будет установлена
 утилита dialog для отображения графического интерфейса установки и выдан
 диалог выбора варианта установки компонентов веб-приложения.


	- Выберите вариант установки компонентов веб-приложения:


		- Полная. Автоматическая
		 установка всех компонентов веб-приложения, кроме [сервера
		 лицензий](../08_Licensing/RMS/LicenseServer.htm) и конструктора бизнес-приложений:


			- Установить все компоненты (СУБД PostgreSQL);


		- Выборочная. Ручное
		 определение списка устанавливаемых компонентов:


			- BI-сервер с клиентом PostgreSQL;


			- Веб-сервер;


			- BI-сервер и веб-сервер с клиентом PostgreSQL;


			- СУБД PostgreSQL;


			- Сервер лицензий;


Примечание.
 Установка сервера лицензий производится на базе программного обеспечения
 [RMS](../08_Licensing/RMS/LicenseServer.htm). Для установки
 сервера лицензий на базе Guardant обратитесь к разделу «[Сервер
 лицензий Guardant и особенности его использования](../08_Licensing/Guardant/License_Server_Guardant.htm)».


			- Конструктор бизнес-приложений.


Примечание.
 Перед установкой конструктора бизнес-приложений должны быть установлены
 все компоненты веб-приложения, [установлено
 расширение «Конструктор бизнес-приложений»
 в репозитории](../Extensions/install_extensions_in_repository.htm) и [создано
 бизнес-приложение](Constructor.chm::/Intro/Component_interface.htm#create) в [навигаторе
 объектов](GetStarted.chm::/Interface/Interface_Navigator.htm). Для выполнения скрипта измените значения
 [параметров](#parameters) METABASE_ID
 и DBA_ID.


После выполнения действий будут установлены компоненты веб-приложения
 в зависимости от выбранного варианта установки:


		 Компонент
		 Результат


		 Серверная часть СУБД PostgreSQL
		 После выбора одного из вариантов установки «Установить все
		 компоненты (СУБД PostgreSQL)», «BI-сервер с клиентом PostgreSQL»,
		 «BI-сервер и веб-сервер с клиентом PostgreSQL» или «СУБД PostgreSQL»
		 будет добавлен [репозиторий
		 PostgreSQL](https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm) для используемой версии ОС и установлена PostgreSQL
		 11.


		 BI-сервер
		 После выбора одного из вариантов установки «Установить все
		 компоненты (СУБД PostgreSQL)», «BI-сервер с клиентом PostgreSQL»
		 или «BI-сервер и веб-сервер с клиентом PostgreSQL» будут созданы
		 каталоги:


			- /opt/foresight/fp10.x-biserver.
			 Основные файлы BI-сервера;


			- /etc/apache2-fp10.x.
			 Конфигурационные файлы экземпляра Apache2 с BI-сервером для
			 Astra Linux;


			- /etc/httpd-fp10.x.
			 Конфигурационные файлы экземпляра Apache2 с BI-сервером для
			 РЕД ОС, Rocky Linux;


			- /etc/httpd2-fp10.x.
			 Конфигурационные файлы экземпляра Apache2 с BI-сервером для
			 ALT Linux.


		В процессе установки BI-сервера выводится запрос на [получение
		 цифрового отпечатка компьютера](../08_Licensing/RMS/LockingCode.htm) для создания [постоянной
		 лицензии](../08_Licensing/Admin_Licensing_Variants.htm). При положительном ответе цифровой отпечаток будет
		 выведен на экран и сохранён в файл locking_code.txt. Файл создаётся
		 на уровне скрипта.


		Особенности установки BI-сервера:


			- при полной установке автоматически выполняется подготовка
			 серверной части СУБД, создаётся новая база данных (METABASE_DBNAME)
			 и репозиторий (METABASE_ID);


			- при выборочной установке запрашивается разрешение на
			 создание новой базы данных (METABASE_DBNAME) и репозитория
			 (METABASE_ID) на сервере СУБД (DATABASE_SERVER). Для создания
			 базы данных и репозитория в переменных PG_ADMIN_ROLE и PG_ADMIN_PASSWORD
			 должны быть указаны учётные данные администратора СУБД соответствующие
			 серверу.


		При необходимости для управления BI-сервером выполните команду:


			- Astra Linux:


		sudo
		 systemctl start/restart/stop apache2-fp10.x


			- РЕД ОС, Rocky Linux:


		sudo
		 systemctl start/restart/stop httpd-fp10.x


			- ALT Linux:


		sudo systemctl
		 start/restart/stop httpd2-fp10.x


		 Веб-сервер
		 После выбора одного из вариантов установки «Установить все
		 компоненты (СУБД PostgreSQL)», «Веб-сервер» или «BI-сервер и веб-сервер
		 с клиентом PostgreSQL» будут созданы каталоги:


			- /opt/foresight/fp10.x-webserver.
			 Основные файлы веб-сервера;


			- /etc/opt/foresight/fp10.x-webserver.
			 Дополнительный конфигурационный файл экземпляра веб-сервера
			 envvars для задания переменных окружения Apache2;


			- /etc/apache2-fp10.x-web. Конфигурационные файлы
			 экземпляра Apache2 с веб-сервером для Astra Linux;


			- /etc/httpd-fp10.x-web.
			 Конфигурационные файлы экземпляра Apache2 с веб-сервером для
			 РЕД ОС, Rocky Linux;


			- /etc/httpd2-fp10.x-web.
			 Конфигурационные файлы экземпляра Apache2 с веб-сервером для
			 ALT Linux.


		При необходимости для управления веб-сервером выполните команду:


			- Astra Linux:


		sudo
		 systemctl start/restart/stop apache2-fp10.x-web


			- РЕД ОС, Rocky Linux:


		sudo
		 systemctl start/restart/stop httpd-fp10.x-web


			- ALT Linux:


		sudo systemctl
		 start/restart/stop httpd2-fp10.x-web


		Веб-сервер доступен по адресу:


		http://<IP-адрес
		 или DNS-имя сервера>:8110/fp10.x/r/


		 [Сервер
		 лицензий](../08_Licensing/RMS/LicenseServer.htm)
		 После выбора варианта установки «Сервер лицензий» будут
		 созданы:


			- /opt/lserv.
			 Файлы сервера лицензий;


			- lserv64. Служба
			 (сервис) для управления сервисом лицензий.


		При необходимости для управления сервером лицензий выполните
		 команду:


		sudo systemctl start/restart/stop lserv64


		 Конструктор бизнес-приложений
		 После выбора варианта установки «Конструктор бизнес-приложений»
		 будут созданы каталоги:


			- /opt/foresight/fp10.x-dba.
			 Основные файлы конструктора бизнес-приложений;


			- /etc/opt/foresight/fp10.x-dba.
			 Дополнительный конфигурационный файл экземпляра конструктора
			 бизнес-приложений envvars для задания переменных окружения
			 Apache2;


			- /etc/apache2-fp10.x-dba. Конфигурационные файлы
			 экземпляра Apache2 с конструктором бизнес-приложений для Astra
			 Linux;


			- /etc/httpd-fp10.x-dba. Конфигурационные файлы
			 экземпляра Apache2 с конструктором бизнес-приложений для РЕД
			 ОС, Rocky Linux;


			- /etc/httpd2-fp10.x-dba. Конфигурационные файлы
			 экземпляра Apache2 с конструктором бизнес-приложений для ALT
			 Linux.


		При необходимости для управления конструктором бизнес-приложений
		 выполните команду:


			- Astra Linux:


		sudo
		 systemctl start/restart/stop apache2-fp10.x-dba


			- РЕД ОС, Rocky Linux:


		sudo
		 systemctl start/restart/stop httpd-fp10.x-dba


			- ALT Linux:


		sudo systemctl
		 start/restart/stop httpd2-fp10.x-dba


		Конструктор бизнес-приложений доступен по адресу:


		http://<IP-адрес
		 или DNS-имя сервера>:8210/dba/


По умолчанию веб-приложение работает по протоколу HTTP. Для настройки
 работы веб-приложения по протоколу HTTPS обратитесь к разделу «[Настройка веб-приложения
 для работы через HTTPS](04_FAQ/setting_https.htm)».


## Изменение значений параметров веб-приложения


Для изменения значений параметров веб-приложения, которые должны отличаться
 от значений по умолчанию, откройте скрипт на редактирование. Параметры
 веб-приложения используются в качестве переменных в следующем блоке скрипта:


############## Переменные которые можно менять


# Тип лицензирования - переменная LSFORCEHOST в файле /opt/foresight/fp10.x-biserver/etc/envvars


SET_LSFORCEHOST="NO-NET"    #
 Для определения порядка применения лицензий (автономная или сетевая)


# Идентификатор репозитория


METABASE_ID="ANALYTICS_PLATFORM"


# IP-адрес или DNS-имя сервера базы данных СУБД


DATABASE_SERVER="127.0.0.1"


# Порт сервера СУБД


DATABASE_PORT=5432


# Количество соединений с СУБД


MAX_CON=500


# Конфигурация файла аутентификации пользователей pg_hba.conf


PG_HBA_CONNECTION_STRING="host    all
    all    0.0.0.0/0    md5"


# Файл с исходными данными репозитория


REPO_FILE="./fp_repo/scheme.sql"


# Учётные данные роли-администратора PostgreSQL


PG_ADMIN_ROLE=postgres


PG_ADMIN_PASSWORD=postgres


# Учётные данные владельца схемы


OWNER_METABASE_ROLE=FP_ADMIN


OWNER_METABASE_PASSWORD=FP_ADMIN


# Учётные данные служебного пользователя


SEC_ROLE=AUDIT


SEC_PASS=AVbGm86ugD9tpBjK577NPHgw


# Адрес BI-сервера, если BI-сервер и серверная часть веб-приложения расположены на различных
 физических серверах


BI_SERVER="localhost"


# Идентификатор базы данных


METABASE_DBNAME="ANALYTICS_PLATFORM"


# Директория, содержащая дистрибутивы BI-сервера и веб-сервера


FP_DIST_DIR="./fp-dist"


# Директория, содержащая дистрибутивы сервера лицензий


LSERV_DIST_DIR="./fp-lic-dist"


# Лог-файл процесса установки


LOG_FILENAME="fp-install.log"


# Идентификатор бизнес-приложения


DBA_ID=OBJ224


Описание переменных:


	- SET_LSFORCEHOST. Способ
	 поиска [лицензии](../08_Licensing/Admin_Licensing.htm):


		- если сервер лицензий не установлен, то для поиска автономной
		 лицензии в значении переменной укажите «NO-NET». Используется
		 по умолчанию;


		- если сервер лицензий установлен, то для поиска сетевой лицензии
		 в значении переменной укажите имя сервера лицензий;


	- METABASE_ID. Уникальный
	 идентификатор репозитория. По умолчанию: ANALYTICS_PLATFORM;


	- DATABASE_SERVER. IP-адрес
	 или DNS-имя, под которым зарегистрирован сервер базы данных СУБД.
	 По умолчанию: 127.0.0.1;


	- DATABASE_PORT. Порт
	 сервера СУБД. По умолчанию: 5432;


	- MAX_CON. Количество
	 соединений с СУБД. По умолчанию конфигурационный файл PostgreSQL/Postgres
	 Pro идёт с минимальными настройками. Данный параметр влияет на изменение
	 значения max_connections.
	 Рекомендуемое количество соединений с СУБД - 500;


	- PG_HBA_CONNECTION_STRING.
	 Конфигурация файла аутентификации пользователей pg_hba.conf. По умолчанию:
	 host all all 0.0.0.0/0 md5, аутентификация доступна любому пользователю
	 по логину и паролю;


	- REPO_FILE. Путь до файла
	 scheme.sql с исходными данными репозитория. По умолчанию: ./fp_repo/scheme.sql;


	- PG_ADMIN_ROLE. Имя администратора
	 СУБД с привилегией SUPERUSER. По умолчанию: postgres;


	- PG_ADMIN_PASSWORD. Пароль
	 администратора СУБД. По умолчанию: postgres;


	- OWNER_METABASE_ROLE.
	 Имя создаваемого пользователя базы данных. По умолчанию: FP_ADMIN;


	- OWNER_METABASE_PASSWORD.
	 Пароль создаваемого пользователя базы данных. По умолчанию: FP_ADMIN;


	- SEC_ROLE. Имя создаваемого
	 [служебного
	 пользователя](../05_RepoMngr/Linux/Setup_RepoMngr_Service_User_Linux.htm). По умолчанию:
	 AUDIT;


Примечание.
 Имя служебного пользователя P4AUDIT зарезервировано системой и недоступно
 для использования.


	- SEC_PASS. Пароль создаваемого
	 служебного пользователя. По умолчанию: AVbGm86ugD9tpBjK577NPHgw;


	- BI_SERVER. IP-адрес
	 или DNS-имя сервера, на котором будет установлен BI-сервер. Используется,
	 если BI-сервер и серверная часть веб-приложения должны располагаться на различных физических
	 серверах. По умолчанию: localhost;


	- METABASE_DBNAME. Идентификатор
	 создаваемой базы данных. По умолчанию: ANALYTICS_PLATFORM;


	- FP_DIST_DIR. Путь до
	 папки с дистрибутивами BI-сервера и веб-сервера. По умолчанию: ./fp-dist;


	- LSERV_DIST_DIR. Путь
	 до папки с дистрибутивами сервера лицензий. По умолчанию: ./fp-lic-dist;


	- LOG_FILENAME. Наименование
	 файла с расширением *.log, который будет использоваться для ведения
	 лога в процессе установки веб-приложения. По умолчанию: fp-install.log. Файл создаётся
	 на уровне скрипта;


	- DBA_ID. Идентификатор
	 [бизнес-приложения](../../constructor/Intro/Component_interface.htm) в навигаторе
	 объектов.


См. также:


[Установка
 и настройка продукта «Форсайт. Аналитическая платформа»](../Setup_TitlePage.htm)


		Справочная
		 система на версию 10.9
		 от 18/08/2025,
		 © ООО «ФОРСАЙТ»,
