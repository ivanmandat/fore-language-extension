# Установка BI-сервера на ОС ALT Linux

Установка BI-сервера на ОС ALT Linux
-


# Установка и настройка BI-сервера на ALT Linux


	На странице приведён пример установки, настройки и удаления BI-сервера
	 на OC ALT Linux. Поддерживаемые версии Linux приведены в статье «[Поддерживаемые
	 версии ОС Linux](../02_SystemReq/system_requirments_Linux.htm)».


	Примечание.
	 Функциональность BI-сервера ограничена набором доступных [операций](PPSOMService.chm::/Operations/BaseService.htm)
	 и их [реализацией](Linux_constraints.htm).


## Подготовка


Выполните подготовительные действия перед установкой BI-сервера:


	- Убедитесь в соблюдении [настроек
	 операционной системы](../../01_SysReq/EnviromentRequirements.htm) и [программно-аппаратных
	 требований](../../01_SysReq/SystemRequirement.htm), необходимых для корректной установки и полноценного
	 функционирования веб-приложения «Форсайт. Аналитическая платформа».


	- Выполните настройку для [серверной
	 части СУБД](../../03_DB_Server_Config/Setup_DB_Server_Config.htm).


	- Выполните установку клиентской части СУБД:


		Oracle PostgreSQL SQLite Microsoft SQL Server

			Для установки клиентской части Oracle скачайте клиент с
			 официального [сайта](http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html) (требуются пакеты
			 basic, devel, sqlplus в RPM-формате).


			Рассмотрим установку на примере клиента Oracle версии 12.1.
			 Для этого скопируйте RPM-пакеты и установите командой:


			sudo apt-get
			 install oracle-instantclient*


			После установки добавьте путь до библиотек клиента Oracle
			 с помощью утилиты ldconfig в список поиска зависимых библиотек
			 и обновите кеш:


			echo "/usr/lib/oracle/12.1/client64/lib"
			 > ~/oracle.conf

			sudo cp ~/oracle.conf /etc/ld.so.conf.d/

			sudo ldconfig


			После установки BI-сервера для экземпляра Apache2 в файл
			 переменных окружения /opt/foresight/fp10.x-biserver/etc/envvars
			 экспортируйте переменную TNS_ADMIN
			 с указанием каталога, содержащего файл tnsnames.ora.
			 У экземпляра Apache2 должен быть доступ к файлу, можно установить
			 владельца apache2:apache2
			 для файла tnsnames.ora.


			Подробней про создание базы данных для репозитория читайте
			 в подразделе «[Подготовка
			 сервера Oracle](../../03_DB_Server_Config/Setup_DB_Server_Config_Oracle.htm)».


			Для установки клиентской части PostgreSQL из репозитория
			 выполните следующую команду:


			sudo apt-get
			 install postgresql11


			Альтернативным вариантом является установка клиента Postgres
			 Pro. Инструкция по установке доступна на [сайте
			 производителя](https://postgrespro.ru/docs/enterprise/14/binary-installation-on-linux).


			Подробней про создание базы данных для репозитория читайте
			 в подразделе «[Подготовка сервера PostgreSQL](../../03_DB_Server_Config/Postgres_server_preparation.htm)».


			Если осуществляется ручная установка BI-сервера из архива
			 или установка клиентской части СУБД выполнена после установки
			 BI-сервера, то нужно создать символьную ссылку:


			sudo ln
			 -s /usr/lib64/libpq.so.5 /usr/lib64/libpq.so


			Для установки клиентской части SQLite настройка не требуется.
			 Достаточно скопировать файл с базой репозитория на сервер,
			 выдать права доступа BI-серверу к файлу и добавить SQLite-репозиторий
			 с указанием файла базы.


			Если репозиторий создан на базе СУБД Microsoft SQL Server,
			 то работа с ним возможна через ODBC-драйвер. Более подробно
			 читайте в [документации Microsoft](https://learn.microsoft.com/ru-ru/sql/connect/odbc/microsoft-odbc-driver-for-sql-server?view=sql-server-ver16).


	Примечание.
	 Возможные проблемы, которые могут возникнуть после установки клиентской
	 части СУБД при подключении к серверу СУБД, представлены в разделах,
	 описывающих решение возможных проблем при [установке,
	 обновлении](FAQ.chm::/Errors/Error_when_installing_and_updating.htm) и при [работе](FAQ.chm::/Errors/Error_while_working.htm)
	 с «Форсайт. Аналитическая платформа».


	Для работы BI-сервера продукта «Форсайт. Аналитическая платформа»
	 потребуется установка сторонних пакетов, которые можно загрузить из
	 сети Интернет или, в случае отсутствия доступа к сети, установить
	 из DVD-репозитория или из готовых rpm-пакетов. Если доступ к Интернет
	 осуществляется через прокси-сервер, то произведите необходимые для
	 подключения [настройки](General_for_linux/Proxy.htm).


### Настройка пользователя


	Данный раздел актуален, если в процессе или после установки ОС был
	 создан дополнительный пользователь в системе. Если установка производится
	 от пользователя root (не безопасно), то использовать утилиты su и
	 sudo нет необходимости.


	Для добавления пользователя с возможностью выполнять команды от
	 имени суперпользователя root (пароль от root указывался во время установки
	 дистрибутива), выполните следующие действия:


		- Войдите в систему под учетной записью, созданной в процессе
		 установки.


		- Откройте терминал, выполнив команду главного меню «Приложения > Системные
		 > Терминал». В открывшемся
		 окне выполните команду входа в консоль под пользователем root:


	su


	Введите пароль от пользователя root.


		- Отредактируйте файл /etc/sudoers:


	vi /etc/sudoers


	После строк:


	## Allow root to
	 run any commands anywhere


	root ALL=(ALL) ALL


	Добавьте строку:


	<имя
	 пользователя> ALL=(ALL) ALL


	В подстановке <имя
	 пользователя> укажите наименование учётной записи, которая
	 используется для работы. Нажмите клавишу F2 и подтвердите изменения.


		- Авторизуйтесь в консоли под вашим пользователем, выполнив
		 команду:


	su <имя
	 пользователя>


	Или просто закройте окно терминала и
	 откройте его снова.


## Установка BI-сервера


	Для установки RPM-пакета BI-сервера потребуется доступ в репозиторий
	 с зависимыми пакетами: glibc, glib2, libgomp, libjpeg, libXi, libXrandr,
	 libXrender, libXcursor, libXinerama, fontconfig, findutils, bash,
	 sed, openssl-libs >= 1, libglvnd-opengl, libstdc++, redhat-lsb-core,
	 xorg-x11-server-Xvfb, libpng, mesa-libGL, mesa-libGLU, openldap, liberation-sans-fonts,
	 qt5-qtbase, qt5-qtbase-gui, qt5-qtimageformats, httpd, xorg-xvfb,
	 libpng15, qt5-imageformats, libnsl1 (для Oracle), apache2-base, apache2-httpd-worker.


	Для установки пакетов в терминале выполните команды:


	sudo apt-get install glibc


	sudo apt-get install lsb-core


	sudo apt-get install
	 xorg-xvfb


	Для установки Apache2 выполните команду:


	sudo apt-get install
	 apache2


	После того, как будут установлены необходимые пакеты, выполните
	 установку BI-сервера:


		- Скопируйте RPM-пакет вида foresight-fp10.x-biserver-10.9.*.rpm
		 в домашнюю директорию. Здесь и далее 10.9
		 - это версия релиза продукта «Форсайт. Аналитическая платформа»,
		 например, для «Форсайт. Аналитическая платформа»
		 версии 10.9
		 наименование RPM-пакета будет следующим: foresight-fp10.x-biserver-10.9.*.rpm.


		- Установите пакет BI-сервера (может использоваться другая
		 утилита для установки пакетов):


	rpm -ihv foresight-fp10.x-biserver.*.rpm


	В процессе установки будет создан новый экземпляр конфигурации Apache2
	 для BI-сервера, включен модуль mpm_worker,
	 включен модуль fp10.x-biserver для
	 загрузки mod_axis2, созданы
	 ссылки вида apache2ctl-fp10.x в
	 директории /usr/local/sbin для
	 управления экземпляром, зарегистрирован и добавлен в автозагрузку
	 сервис apache2-fp10.x,
	 установлены файлы «Форсайт. Аналитическая платформа»,
	 зарегистрирован и добавлен в автозагрузку сервис foresight-xvfb для запуска
	 виртуального графического дисплея под номером 987. Сервис foresight-xvfb будет
	 запущен автоматически, а apache2-fp10.x
	 потребует запуска командой:


	systemctl start
	 httpd2-fp10.x.service


	После установки для отслеживания работы BI-сервера и фиксирования
	 различных ошибок можно включить логирование системных сообщений. Для
	 этого в файле /opt/foresight/fp10.x-biserver/etc/envvars
	 раскомментируйте следующую строку:


	# PP_LOG=1


## Настройка BI-сервера


		- При своей работе BI-сервер использует настройки, заданные
		 в файле [settings.xml](BI_Server_Settings_XML.htm).
		 Ознакомьтесь с его структурой и при необходимости внесите изменения.


	Примечание.
	 Наличие файла с настройками необязательно. Если файл отсутствует,
	 то используются значения параметров по умолчанию.


		- Для получения информации о репозиториях, с которыми может
		 осуществляться работа, BI-сервер использует файл registry.reg
		 или Metabases.xml. О их настройке более подробно читайте в статье
		 «[Конфигурация и настройка](config_and_setting.htm)».


		- [Активируйте
		 продукт «Форсайт. Аналитическая платформа»](../../08_Licensing/Admin_Licensing.htm).


		- На все дополнительные файлы, которые будет использовать
		 BI-сервер, должны быть выданы права доступа для пользователя Apache2:


	sudo chown -R apache2:apache2
	 /opt/foresight/fp10.x-biserver


	Если не хватает прав на создание дополнительных
	 файлов, то также выполните команды:


	sudo chmod -R 777
	 /opt/foresight/fp10.x-biserver


	sudo setfacl -R -m
	 u:apache2:rwx /opt/foresight/fp10.x-biserver


		- После выполнения настроек и раздачи прав перезагрузите сервис
		 BI-сервер:


	sudo systemctl restart
	 httpd2-fp10.x


	Примечание.
	 В ALT Linux команды могут отличаться в зависимости от используемого
	 менеджера инициализации systemd или SysVinit (systemctl или service).


		- Выполните [проверку
		 работы](../01_BIServer/CheckBIServices.htm) BI-сервера.


	Установленный BI-сервер будет работать в фоновом режиме как отдельный
	 сервис Linux. Экземпляр Apache2 с BI-сервером будет запускаться на
	 порту 88xx, где xx соответствует мажорной версии релиза продукта «Форсайт. Аналитическая платформа».


	После установки и настройки BI-сервера перейдите к [установке
	 серверной части веб-приложения](Web_server_setup.htm).


## Создание репозитория метаданных


Репозиторий метаданных можно создать двумя способами:


	- в тестовом контуре с ОС Windows создайте [репозиторий
	 метаданных](../../05_RepoMngr/Setup_RepoMngr_CreateRepo.htm), [служебного
	 пользователя подсистемы безопасности](../../05_RepoMngr/Setup_RepoMngr_Service_User.htm) и выполните [настройку
	 подключения к репозиторию](../../06_AK_Client_Config/UiNav_RepoConfig_repo1.htm), используя настольное приложение «Форсайт. Аналитическая платформа».


Перед созданием репозитория ознакомьтесь
 с разделом «[Установка
 настольного приложения продукта «Форсайт. Аналитическая платформа»](../../02_AK_Install/Setup_AK_Install.htm)».


	- в тестовом контуре c ОС семейства Linux создайте [репозиторий
	 метаданных](../../05_RepoMngr/Linux/Setup_CreateRepo_Linux.htm) и выполните [настройку
	 подключения к репозиторию](config_and_setting.htm).


После выполнения одного из способов перенесите репозиторий и настройки
 подключения в промышленный контур средствами СУБД.


## Удаление BI-сервера


	Для удаления файлов BI-сервера без удаления конфигурационных файлов
	 выполните команду и подтвердите удаление:


	sudo apt-get remove
	 fp10.x-biserver


	Все файлы в папках /etc/httpd-fp10.x и /opt/foresight
	 /fp10.x-biserver, а
	 также новые файлы, не входящие в пакет установки, будут сохранены
	 и могут быть использованы при следующей установке пакета.


См. также:


[Установка веб-приложения на ОС
 Linux](../Install_Web_on_Linux.htm) | [Проверка
 работы BI-сервера](../01_BIServer/CheckBIServices.htm)


		Справочная
		 система на версию 10.9
		 от 18/08/2025,
		 © ООО «ФОРСАЙТ»,
