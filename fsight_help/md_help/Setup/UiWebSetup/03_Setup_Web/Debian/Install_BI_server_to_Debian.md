# Установка и настройка BI-сервера в Debian-подобных дистрибутивах

Установка и настройка BI-сервера в Debian-подобных дистрибутивах
-


# Установка и настройка BI-сервера в Debian-подобных дистрибутивах


	На странице приведён пример установки, настройки и удаления BI-сервера
	 в Debian-подобных дистрибутивах. Поддерживаемые версии ОС Linux приведены
	 в статье «[Поддерживаемые
	 версии ОС Linux](../../02_SystemReq/system_requirments_Linux.htm)».


	Примечание.
	 Функциональность BI-сервера ограничена набором доступных [операций](PPSOMService.chm::/Operations/BaseService.htm)
	 и их [реализацией](../Linux_constraints.htm).


## Подготовка


Выполните подготовительные действия перед установкой BI-сервера:


	- Убедитесь в соблюдении [настроек
	 операционной системы](../../../01_SysReq/EnviromentRequirements.htm) и [программно-аппаратных
	 требований](../../../01_SysReq/SystemRequirement.htm), необходимых для корректной установки и полноценного
	 функционирования веб-приложения «Форсайт. Аналитическая платформа».


	- Выполните настройку для [серверной
	 части СУБД](../../../03_DB_Server_Config/Setup_DB_Server_Config.htm).


	- Выполните установку клиентской части СУБД:


		 Oracle PostgreSQL SQLite Microsoft SQL Server

			Для установки клиентской части Oracle скачайте клиент с
			 официального [сайта](http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html) (требуются пакеты
			 basic, devel, sqlplus в RPM-формате).


			Рассмотрим установку на примере клиента Oracle версии 12.1.
			 Выполните следующие действия:


				- Сконвертируйте RPM-пакеты в формат DEB с помощью
				 утилиты alien:


			sudo apt-get
			 install alien

			sudo alien oracle-instantclient12.1-basic-12.1.0.2.0-1.x86_64.rpm

			sudo alien oracle-instantclient12.1-devel-12.1.0.2.0-1.x86_64.rpm

			sudo alien oracle-instantclient12.1-sqlplus-12.1.0.2.0-1.x86_64.rpm


				- Установите полученные deb-пакеты (в терминале с
				 помощью утилиты dpkg или её аналога) и вспомогательный
				 пакет libaio:


			sudo apt-get
			 install libaio1

			sudo dpkg -i oracle-instantclient12.1*.deb


			После установки добавьте путь до библиотек клиента Oracle
			 с помощью утилиты ldconfig в список поиска зависимых библиотек
			 и обновите кеш:


			echo "/usr/lib/oracle/12.1/client64/lib"
			 > ~/oracle.conf

			sudo cp ~/oracle.conf /etc/ld.so.conf.d/

			sudo ldconfig


			После установки BI-сервера в файл переменных окружения /opt/foresight/fp10.x-biserver/etc/envvars
			 для экземпляра Apache2 потребуется добавить экспорт переменной
			 TNS_ADMIN с указанием
			 каталога, содержащего файл tnsnames.ora. У экземпляра Apache2
			 должен быть доступ к файлу, можно установить владельца www-data:www-data
			 для файла tnsnames.ora.


			Подробней про создание базы данных для репозитория читайте
			 в подразделе «[Подготовка
			 сервера Oracle](../../../03_DB_Server_Config/Setup_DB_Server_Config_Oracle.htm)».


			Для установки клиентской части PostgreSQL выполните следующую
			 команду:


			sudo apt-get install postgresql-client


			После выполнения действия будет установлен драйвер PostgreSQL,
			 с помощью которого «Форсайт. Аналитическая платформа»
			 взаимодействует с сервером баз данных.


			Альтернативным вариантом является установка клиента Postgres
			 Pro. Инструкция по установке доступна на [сайте
			 производителя](https://postgrespro.ru/docs/enterprise/14/binary-installation-on-linux).


			Подробней про создание базы данных для репозитория читайте
			 в подразделе «[Подготовка
			 сервера PostgreSQL](../../../03_DB_Server_Config/Postgres_server_preparation.htm)».


			Если осуществляется ручная установка BI-сервера из архива
			 или установка клиентской части СУБД выполнена после установки
			 BI-сервера, то нужно создать символьную ссылку:


			sudo ln -s /usr/lib/x86_64-linux-gnu/libpq.so.5
			 /usr/lib/x86_64-linux-gnu/libpq.so


			Для установки клиентской части SQLite настройка не требуется.
			 Достаточно скопировать файл с базой репозитория на сервер,
			 выдать права доступа BI-серверу к файлу и добавить SQLite-репозиторий
			 с указанием файла базы.


			Если репозиторий создан на базе СУБД Microsoft SQL Server,
			 то работа с ним возможна через ODBC-драйвер. Более подробно
			 читайте в [документации Microsoft](https://learn.microsoft.com/ru-ru/sql/connect/odbc/microsoft-odbc-driver-for-sql-server?view=sql-server-ver16).


	Примечание.
	 Возможные проблемы, которые могут возникнуть после установки клиентской
	 части СУБД при подключении к серверу СУБД, представлены в разделах,
	 описывающих решение возможных проблем при [установке
	 и обновлении](FAQ.chm::/Errors/Error_when_installing_and_updating.htm), а также при [работе](FAQ.chm::/Errors/Error_while_working.htm)
	 с «Форсайт. Аналитическая платформа».


	Для работы BI-сервера продукта «Форсайт. Аналитическая платформа»
	 потребуется установка сторонних пакетов, которые можно загрузить из
	 сети Интернет или, в случае отсутствия доступа к сети, установить
	 из DVD-репозитория или из готовых deb-пакетов. Если доступ к Интернет
	 осуществляется через прокси-сервер, то произведите необходимые для
	 подключения [настройки](../General_for_linux/Proxy.htm).


	Перед установкой каких-либо пакетов обновите информацию о пакетах
	 в репозитории. Для этого выполните команду:


	sudo apt-get update


## Установка BI-сервера


	Для установки deb-пакета BI-сервера потребуется доступ в репозиторий
	 с зависимыми пакетами: libc6, libstdc++6, libglib2.0-0, lsb-release,
	 libx11-6, libgl1-mesa-glx, libglu1-mesa, libgomp1, libxi6, libxrandr2,
	 libxrender1, libxcursor1, libxinerama1, fontconfig, fonts-liberation,
	 xvfb, libldap-2.4-2, libqt5gui5, libqt5opengl5, qt5-image-formats-plugins,
	 libssl1.0.2, libtiff5, libjpeg62-turbo, libopengl0, libqt5printsupport5,
	 libatomic1, apache2.


	Примечание.
	 Пакет libqt5printsupport5 требуется только для Debian-подобных дистрибутивов,
	 в которых отсутствует графический интерфейс.


	Если есть модули или пакеты, которые не совместимы с MPM worker
	 (например, libapache2-mod-php5) - их необходимо отключить на экземпляре
	 BI-сервера, либо удалить, если они вызывают конфликт при установке
	 BI-сервера. Далее выполните следующие действия:


	- Убедитесь, что доступна сеть Интернет.


	- Обновите информацию о пакетах:


sudo apt-get update


	- Скопируйте дистрибутив foresight-fp10.x-biserver*.deb
	 из комплекта поставки в домашнюю директорию /home/<имя
	 пользователя>. Наименование дистрибутива зависит от версии
	 OC Linux.


При необходимости определите пользователя,
 от имени которого будет установлен BI-сервер:


whoami


	- Установите скопированный дистрибутив BI-сервера:


sudo dpkg -i foresight-fp10.x-biserver*


	- Установите недостающие зависимости:


sudo apt-get -f install


При необходимости повторно обновите информацию
 о пакетах:


sudo apt-get update


	В процессе установки будет создан новый экземпляр конфигурации [Apache2](https://httpd.apache.org), включен
	 MPM worker, включен модуль
	 fp10.x-biserver
	 для загрузки mod_axis2, созданы
	 ссылки вида apachectl-fp10.x
	 в директории /usr/sbin для управления экземпляром, зарегистрирован
	 и добавлен в автозагрузку сервис apache2-fp10.x,
	 установлены файлы BI-сервера продукта «Форсайт. Аналитическая платформа»,
	 зарегистрирован и добавлен в автозагрузку сервис foresight-xvfb
	 для запуска виртуального графического дисплея под номером 987. Сервис
	 foresight-xvfb
	 будет запущен автоматически.


	Примечание.
	 Для изменения версии BI-сервера достаточно установить поверх другую
	 версию пакета. Файлы конфигурации будут сохранены, если в пакете не
	 будет обновлена их версия.


### Настройка логирования


Для отслеживания работы BI-сервера и фиксирования различных ошибок включите
 логирование системных сообщений при необходимости. Для этого в файле /opt/foresight/fp10.x-biserver/etc/envvars
 добавьте следующие строки:


PP_LOG=1


PP_LOGTIME=1


По умолчанию системные сообщения записывается в файл /var/log/apache2-fp10.x/error.log.


## Настройка BI-сервера


	Для настройки BI-сервера:


		- Отключите режим AstraMode для экземпляра apache2-fp10.x.
		 Для этого замените строку «#AstraMode on» в конфигурационном файле
		 /etc/apache2-fp10.x/apache2.conf на
		 указанную:


	AstraMode off


		- Запустите веб-сервер Apache2:


	sudo systemctl start
	 apache2-fp10.x


		- При своей работе BI-сервер использует настройки, заданные
		 в файле [settings.xml](../BI_Server_Settings_XML.htm).
		 Ознакомьтесь с его структурой и при необходимости внесите изменения.


	Примечание.
	 Наличие файла с настройками необязательно. Если файл отсутствует,
	 то используются значения параметров по умолчанию.


		- Для получения информации о репозиториях, с которыми может
		 осуществляться работа, BI-сервер использует файл registry.reg
		 или Metabases.xml. О их настройке более подробно читайте в статье
		 «[Конфигурация и настройка](../config_and_setting.htm)».


		- [Активируйте
		 продукт «Форсайт. Аналитическая платформа»](../../../08_Licensing/Admin_Licensing.htm).


		- Раздайте права доступа для пользователя Apache2 на папку
		 с установленным BI-сервером:


	sudo chown -R www-data:www-data
	 /opt/foresight/fp10.x-biserver


		- Перезапустите сервис BI-сервера:


	sudo systemctl restart
	 apache2-fp10.x


		- Выполните [проверку
		 работы](../../01_BIServer/CheckBIServices.htm) BI-сервера.


	Установленный BI-сервер будет работать в фоновом режиме как отдельный
	 сервис Linux. Экземпляр Apache2 с BI-сервером будет запускаться на
	 порту 8810. Для
	 просмотра необходимых портов используйте файл /etc/apache2-fp10.x/ports.conf.


## Создание репозитория метаданных


Репозиторий метаданных можно создать двумя способами:


	- в тестовом контуре с ОС Windows создайте [репозиторий
	 метаданных](../../../05_RepoMngr/Setup_RepoMngr_CreateRepo.htm), [служебного
	 пользователя подсистемы безопасности](../../../05_RepoMngr/Setup_RepoMngr_Service_User.htm) и выполните [настройку
	 подключения к репозиторию](../../../06_AK_Client_Config/UiNav_RepoConfig_repo1.htm), используя настольное приложение «Форсайт. Аналитическая платформа».


Перед созданием репозитория ознакомьтесь
 с разделом «[Установка
 настольного приложения продукта «Форсайт. Аналитическая платформа»](../../../02_AK_Install/Setup_AK_Install.htm)».


	- в тестовом контуре c ОС семейства Linux создайте [репозиторий
	 метаданных](../../../05_RepoMngr/Linux/Setup_CreateRepo_Linux.htm) и выполните [настройку
	 подключения к репозиторию](../config_and_setting.htm).


После выполнения одного из способов перенесите репозиторий и настройки
 подключения в промышленный контур средствами СУБД.


## Удаление BI-сервера


	Для удаления файлов BI-сервера без удаления конфигурационных файлов
	 выполните команду и подтвердите удаление:


	sudo apt-get remove fp10.x-biserver


	Все файлы в папках /etc/apache2-fp10.x и /opt/foresight/fp10.x-biserver, а также новые
	 файлы, не входящие в пакет установки, будут сохранены и могут быть
	 использованы при следующей установке пакета.


	Для полного удаления BI-сервера вместе с файлами конфигурации выполните
	 команду и подтвердите удаление:


	sudo apt-get purge fp10.x-biserver


	При этом новые файлы, не входящие в пакет установки, будут сохранены.


См. также:


[Установка веб-приложения на
 ОС Linux](../../Install_Web_on_Linux.htm) | [Проверка
 работы BI-сервера](../../01_BIServer/CheckBIServices.htm)


		Справочная
		 система на версию 10.9
		 от 18/08/2025,
		 © ООО «ФОРСАЙТ»,
