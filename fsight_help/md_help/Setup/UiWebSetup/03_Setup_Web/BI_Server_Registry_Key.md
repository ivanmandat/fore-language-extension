# Настройки в системном реестре

Настройки в системном реестре
-


# Настройки в системном реестре


Все основные настройки продукта «Форсайт. Аналитическая платформа»
 сохраняются в разделе [HKEY_LOCAL_MACHINE], в подразделе [System](#system):


	- [HKLM\SOFTWARE\Foresight\Foresight Analytics Platform\10.0\PP\BIS\System]


Также в ветке [HKLM\SOFTWARE\Foresight\Foresight Analytics Platform\10.0] могут быть созданы
 дополнительные подразделы или отдельные ключи, которые используются при
 работе как BI-сервера, так и настольного приложения:


	- [Audit](#audit).
	 Учётные данные [служебного
	 пользователя подсистемы безопасности](../../05_RepoMngr/Setup_RepoMngr_Service_User.htm);


	- [Service](#service).
	 Точки доступа к различным BI-серверам;


	- Manager. Настройки,
	 используемые при работе настольного приложения «Форсайт. Аналитическая платформа».
	 В подразделе может создаваться подраздел Pool,
	 содержащий настройки, используемые настольным приложением, если в
	 нём настроено подключение к репозиторию через веб-сервисы. Структура и параметры подраздела
	 аналогичны подразделу [Pool](#maxconnections),
	 создаваемому в System;


	- [InMem](#inmem).
	 Настройки, определяющие режим работы кеширования данных по технологии
	 [In-Memory](UiNav.chm::/02_Navigator/In-Memory.htm);


	- [Dimensions](#dimensions).
	 Настройки, позволяющие использовать справочник в режиме [кросс-сессионного
	 кеша](UiNav.chm::/02_Navigator/Cache_In_Blob.htm#cross_session);


	- [SysLogServer](BI_Server_Registry_Key.htm#syslogserver).
	 Настройки, определяющие параметры подключения к syslog-серверу для
	 пересылки сообщений о событиях аудита;


	- [Debug](#debug).
	 Настройки, используемые для [расчёта
	 алгоритма](CalculationAlgorithm.chm::/desktop/Work/Perform_calculations.htm);


	- [Nav](#nav).
	 Настройки, используемые навигатором объектов.


Данные разделы включают в себя подразделы, для которых могут быть установлены
 различные параметры.


Примечание.
 Все параметры, создаваемые в данных подразделах, имеют строковый тип.
 Параметры, принимающие только целочисленные значения, создаются с типом
 REG_DWORD.


Пример файла реестра: [settings_reg.zip](../settings_reg.zip).


## Раздел System


В данном разделе создается параметр, влияющий на работу [веб-сервиса](ppsomservice.chm::/PP7SOMService_Title.htm):


		 Параметр
		 Описание


		 GetSystemInfoExtended
		 Получение расширенной информации о ресурсах, потребляемых
		 BI-сервером, при выполнении операции веб-сервиса [GetSystemInfo](ppsomservice.chm::/Operations/Repository/GetSystemInfo.htm)
		 с заданными полями processInfo и cpuInfo.


		Допустимые значения:


			- 0. По умолчанию.
			 При выполнении запроса к веб-сервису возвращается краткая
			 информация о потребляемых ресурсах;


			- 1. При выполнении
			 запроса к веб-сервису возвращается расширенная информация
			 о потребляемых ресурсах.


		Для получения расширенной информации без указания моникёра в
		 запросе должно передаваться поле allowMetabaseNotFound со значением
		 true.


		Примечание.
		 При указании моникёра расширенная информация возвращается вне
		 зависимости от значения параметра GetSystemInfoExtended.


		 AllowDevEnv
		 Признак возможности работы в среде разработки.


		Допустимые значения:


			- 0. Работа в
			 среде разработки запрещена;


			- 1. По умолчанию.
			 Доступно изменение модулей/веб-форм в среде разработки.


В подразделе [HKLM\SOFTWARE\Foresight\Foresight Analytics Platform\10.0\PP\BIS\System\Session]
 создаются параметры, влияющие на работу отдельных сессий с репозиториями:


		 Параметры
		 Описание


		 RWLockSlim
		 Блокировка доступа к открытым экземплярам объектов.


		Допустимые значения:


			- 0. По умолчанию.
			 Объект блокируется на запись;


			- 1. Объект отдельно
			 блокируется на чтение и запись, при этом возможно одновременное
			 чтение из объекта несколькими потоками.


		 LockSession
		 Блокировка всей сессии при выполнении запросов. При включенной
		 блокировке запросы ко всем объектам в рамках сессии будут выполняться
		 последовательно, иначе параллельно или применяются индивидуальные
		 блокировки (RWLockSlim).


		Допустимые значения:


			- 0. По умолчанию.
			 Блокировка выключена;


			- 1. Блокировка
			 включена.


		 LockAd
		 Блокировка доступа к открытым экземплярам аналитических
		 панелей. При включенной блокировке запросы на чтение/запись будут
		 выполняться последовательно, иначе параллельно. Также при этом
		 включается блокировка вложенных объектов, доступ к которым осуществляется
		 с использованием моникера аналитической панели.


		Допустимые значения:


			- 0. По умолчанию.
			 Блокировка выключена;


			- 1. Блокировка
			 включена.


		 TimeoutSec
		 Время ожидания при отсутствии запросов, по истечении которого
		 сессия с репозиторием будет разорвана. Время указывается в секундах,
		 допустимый диапазон [60, 127800]. Если параметр имеет значение
		 «-1», то будет установлено время ожидания - две недели. По умолчанию
		 - 1800 сек.


		 Statable
		 Режим сохранения и восстановления состояний объектов на
		 [сервере
		 состояний](../01_BIServer/StateServer/State_Server.htm). Используется вместе с группой настроек StateServer.


		Допустимые значения:


			- Never или 0. По умолчанию. Не сохранять
			 и не загружать состояния объектов;


			- Yes или 1. Сохранять при изменении,
			 загружать при отсутствии в сессии;


			- Ever. Сохранять
			 при изменении, загружать всегда.


		 KeyIncr
		 Генерация последовательных моникёров сессий и объектов.


		Допустимые значения:


			- 0. По умолчанию.
			 Генерация моникеров через GUID;


			- Yes или 1. Генерация последовательных
			 моникеров (например, S1!M).


		 SecureSession
		 Дополнительная проверка соответствия клиента, от имени которого
		 была открыта сессия, и идентификатора сессии при каждом запросе
		 к BI-серверу. Обеспечивает предупреждение атаки типа XSS.


		Допустимые значения:


			- 0. Проверка
			 не выполняется. Используется, если соединение между клиентом
			 и BI-сервером настроено по протоколу HTTP или клиент не поддерживает
			 работу с файлами cookie;


			- 1. По умолчанию.
			 Проверка выполняется. Для корректной проверки должно быть
			 настроено соединение между клиентом и BI-сервером по протоколу
			 HTTPS и клиент должен поддерживать работу с файлами cookie.


		Для получения подробной информации о работе веб-приложения по
		 протоколу HTTPS обратитесь к разделу «[Настройка
		 веб-приложения для работы через HTTPS](../04_FAQ/setting_https.htm)».


		 StoreBins
		 Ограничение на количество хранимых на сервере с каждым объектом
		 результатов экспорта (для экспресс-отчетов и регламентных отчетов).

		По умолчанию 0, при этом
		 количество сохраняемых результатов не ограничивается.


		 StoreBinSize
		 Максимальный суммарный размер загруженных бинарных объектов
		 в рамках сессии. По умолчанию размер указывается в байтах. Если
		 после значения указать символ «B»,
		 «K» или «M»
		 (англ.), то значение соответственно будет в байтах, килобайтах
		 или мегабайтах. По умолчанию 0,
		 при этом ограничение на загружаемый объем отсутствует.


		 PoolMaxConnections
		 Ограничение на количество соединений с базой данных репозитория.


		Допустимые значения:


			- 0. По умолчанию.
			 Не переиспользовать соединения, всегда создавать новое;


			- <0. Переиспользовать
			 без ограничения на количество (добавлять новое соединение,
			 если нет свободных соединений);


			- >0. Переиспользовать
			 с указанным в параметре ограничением на количество соединений.


		Примечание.
		 Параметр PoolMaxConnections является
		 устаревшим, оставлен для совместимости с версиями Prognoz Platform. Используйте
		 параметр MaxConnections
		 в подразделе реестра [HKLM\SOFTWARE\Foresight\Foresight Analytics Platform\10.0\PP\BIS\System\Pool].


		 GetStatusMode
		 Режим обработки операции [GetStatus](PPSOMService.chm::/Operations/Repository/GetStatus.htm),
		 которая используется в веб-приложении для проверки статуса соединения.


		Допустимые значения:


			- 0. По умолчанию.
			 Отправка запроса продлевает сессию с репозиторием;


			- 1. Отправка
			 запроса не продлевает сессию. При отсутствии других запросов
			 сессия будет разорвана по истечении времени ожидания, которое
			 задаётся в параметре TimeoutSec.


Другие подразделы System для настройки BI-сервера:


		 Подраздел
		 Параметры


		 [HKLM\SOFTWARE\Foresight\

		Foresight Analytics Platform\

		10.0\PP\BIS\System\Pool]
		 Параметры, влияющие на работу пула соединений, который будет
		 использовать BI-сервер:


			- MaxConnections.
			 Максимальное количество соединений в пуле. Допустимые значения:


				- -1. Пул
				 соединений включен;


				- 0. Пул соединений
				 выключен;


				- значение больше
				 ноля. Пул соединений включен, задано максимальное
				 количество соединений (по умолчанию установлено ограничение
				 на 50 соединений);


			- Strategy. Алгоритм
			 вытеснения соединений из пула при необходимости освободить
			 место для нового соединения. Допустимые значения:


				- LRU. Алгоритм
				 вытеснения давно не используемых по времени соединений
				 (LRU-алгоритм);


				- Balance
				 или Default. Вытеснение
				 по соотношению количество открытых репозиториев/количество
				 открытых соединений с БД;


			- UserMaxConnections.
			 Максимальное количество соединений, созданных с одинаковыми
			 учётными данными. По умолчанию 0,
			 при этом ограничение на количество соединений отсутствует;


			- RetryCount.
			 Число попыток проверки занятости соединения. Допустимое значение
			 - [1, 1600], по умолчанию - 160 попыток;


			- RetryInterval.
			 Интервал между попытками проверки в миллисекундах. Допустимое
			 значение - [10, 4000], по умолчанию - 400 миллисекунд.


		Также, в подразделе Pool
		 могут быть созданы дополнительные подразделы с параметрами для
		 конкретных репозиториев. Создаваемый дополнительный подраздел
		 должен иметь любое уникальное наименование, в нем могут быть созданы
		 следующие параметры:


			- Db. Параметры
			 соединения для пользователя в следующем формате: {имя_пользователя}:{идентификатор_метабазы}@{сервер_бд};


			- UserMaxConnections.
			 Максимальное количество соединений с указанным репозиторием
			 под указанным пользователем.


		Примечание.
		 Параметры пула соединений применяются, если значение параметра
		 MaxConnections больше
		 нуля.


		 [HKLM\SOFTWARE\Foresight\

		Foresight Analytics Platform\

		10.0\PP\BIS\System\StateServer]
		 Параметры подключения к [серверу
		 состояний](../01_BIServer/StateServer/State_Server.htm).


			- Type. Тип сервера
			 состояний. Допустимые значения:


				- MemCached;


				- Redis.


		Для настройки сервера состояний обязательно
		 задайте одно из значений в зависимости от приложения;


			- Host. IP-адрес
			 или DNS-имя сервера состояний. По умолчанию: «localhost»;


			- Port. Номер
			 порта, через который будет осуществляться подключение. При
			 значении «-1» используется порт по умолчанию: 11211 для MemCached
			 и 6379 для Redis;


			- ExpireTime.
			 Время хранения записей на сервере состояний в секундах. Если
			 параметр не задан или равен 0, то записи хранятся бессрочно.
			 Используется для Redis.


		Для [настройки
		 аутентификации на сервере состояний](../01_BIServer/StateServer/Settings_Authentication_State_Server.htm) создайте подраздел Credentials и задайте параметры
		 Crs, Crsa.
		 В параметрах укажите учётные данные пользователя для подключения
		 к серверу состояний в зашифрованном виде. Зашифрованные значения
		 этих параметров можно получить с помощью утилиты [PP.Util](../../05_RepoMngr/Service_Applications/PP_Util.htm),
		 используя параметр /encrypt_creds.


		 [HKLM\SOFTWARE\Foresight\

		Foresight Analytics Platform\

		10.0\PP\BIS\System\Cert]
		 В данном подразделе хранится закрытый ключ сертификата безопасности.
		 Параметры этого подраздела реестра создаются при работе программы
		 PP.Util.


			- Alg. Алгоритм
			 шифрования;


			- Data. Зашифрованный
			 закрытый ключ сертификата безопасности;


			- Id. Идентификатор
			 сертификата безопаности;


			- Key. GUID сертификата
			 безопасности.


		Важно.
		 Параметры данного подраздела не должны редактироваться вручную.


		 [HKLM\SOFTWARE\Foresight\

		Foresight Analytics Platform\

		10.0\PP\BIS\System\Mbs]
		 Параметры объектов для сбора статистики. В данном подразделе
		 необходимо создать дополнительные подразделы с именами, равными
		 идентификатору репозиториев. В каждом дополнительном подразделе
		 может быть создан параметр:


			- StatKeys. Ключи
			 отдельных объектов репозитория, указанные через запятую, при
			 работе с которыми будут собираться счётчики производительности.


		 [HKLM\SOFTWARE\Foresight\

		Foresight Analytics Platform\

		10.0\PP\BIS\System\OAuth]
		 Параметры работы через протокол [OAuth
		 2.0](../Authentication/login_settings_using_external_services.htm) или OpenID Connect для аутентификации пользователей на
		 сторонних серверах, поддерживающих данный протокол.


		При аутентификации через внешние сервисы должно быть настроено
		 соединение между клиентом и BI-сервером по [протоколу
		 HTTPS](../04_FAQ/setting_https.htm). По умолчанию выполняется проверка параметра state
		 для защиты от потенциальных атак типа CSRF при получении кода
		 авторизации. Если соединение между клиентом и BI-сервером настроено
		 по протоколу HTTP, то создайте параметр StateCheckOff
		 со значением «1» для отключения проверки.


		Для настройки взаимодействия с внешними сервисами внутри раздела
		 OAuth создаются подразделы с именами серверов аутентификации OAuth/OpenID
		 Connect. В каждом подразделе задаются необходимые специфические
		 параметры. Допустимы следующие параметры серверов аутентификации
		 OAuth/OpenID Connect:


	- AuthUrl. Адрес сервиса
	 авторизации, который будет использоваться в веб-приложении для параметра
	 RequestTokenUrl, с содержанием
	 дополнительных URL-параметров. Для протокола OpenID Connect в параметре
	 scope указываются значения
	 «profile+openid»;


	- ConsumerKey. Ключ зарегистрированного
	 приложения;


	- ConsumerSecret. Секретный
	 код зарегистрированного приложения;


	- Icon. Пиктограмма, которая
	 будет отображаться на кнопке авторизации с помощью сервера аутентификации
	 OAuth/OpenID Connect. Если параметр не задан, то пиктограмма будет
	 загружена из ресурсов «Форсайт. Аналитическая платформа».
	 В качестве значения параметра указывается строка, содержащая изображение
	 в формате [base64](https://www.base64-image.de/);


	- PPUserNameFormat. Формат
	 имен пользователей, например, «oa-ggl-%s»;


	- RequestCallbackParam.
	 Наименование атрибута, через который будет передаваться адрес для
	 переадресации пользователя в веб-приложение после авторизации на внешнем
	 сервисе, например, «redirect_uri». Адрес веб-приложения должен содержаться
	 в настройках авторизации внешнего сервиса;


	- RequestTokenUrl. Адрес
	 сервиса авторизации, по которому будет запрашиваться токен авторизации;


	- UserDataUrl. Адрес сервиса
	 данных, по которому будут запрашиваться данные о пользователе после
	 авторизации в веб-приложении. Актуально только для протокола OAuth;


	- UserIdAttr. Наименование
	 атрибута или путь до него в userinfo, который будет использоваться
	 в качестве уникального идентификатора пользователя. Например, наименование
	 атрибута «given_name» или путь «/path/to/given_name»;


	- UserNameAttr. Наименование
	 атрибута или путь до него в userinfo, который будет использоваться
	 в качестве отображаемого имени пользователя. Например, наименование
	 атрибута «name» или путь «/path/to/name»;


	- UserRolesAttr. Наименование
	 атрибута или путь до него в userinfo, который будет использоваться
	 для получения списка групп пользователей и временного добавления пользователя
	 в полученные группы. Используется, если учётная запись пользователя
	 не создана в [менеджере
	 безопасности](admin.chm::/Admin_Title.htm),
	 а требуемые группы пользователей созданы в нём. Например, наименование
	 атрибута «groups» или путь «/path/to/groups». Если параметр UserRolesAttr не указан, то временный
	 пользователь добавляется во встроенную группу ПОЛЬЗОВАТЕЛИ.


Важно.
 В списке групп пользователей не допускается указание встроенной группы
 АДМИНИСТРАТОРЫ. Если данная группа имеется в списке, то при подключении
 будет сгенерирована исключительная ситуация.


При настройке подключения к репозиторию под конкретным пользователем,
 который проходил авторизацию на внешнем сервисе, значения в параметрах
 UserIdAttr и
 UserNameAttr могут совпадать.


Уникальный идентификатор и имя пользователя, полученные при работе с
 внешним сервисом с помощью параметров UserIdAttr
 и UserNameAttr, записываются:


	- в файл /var/log/apache2-fp10.x/error.log для Astra
	 Linux;


	- в файл /var/log/httpd/error-fp10.x.log для РЕД ОС, Rocky
	 Linux;


	- в файл /var/log/httpd2/error-fp10.x.log для ALT Linux.


Значения, указываемые в параметрах ConsumerKey
 и ConsumerSecret, будут получены
 после регистрации разрабатываемого приложения на необходимом сервере аутентификации
 OAuth/OpenID Connect. Данные параметры необходимы, чтобы после авторизации
 на сервере аутентификации OAuth/OpenID Connect BI-сервер смог проверить
 и авторизовать соответствующего пользователя в репозитории.


Если параметры ConsumerKey и
 ConsumerSecret не указаны, то
 используются внутренние настройки BI-сервера, при этом на сервере аутентификации
 OAuth/OpenID Connect должно быть зарегистрировано приложение на базе веб-приложения
 «Форсайт. Аналитическая платформа».


		 [HKLM\SOFTWARE\Foresight\

		Foresight Analytics Platform\

		10.0\PP\BIS\System\ExtService]
		 Параметры внешних сервисов аутентификации, которые будут
		 использоваться для авторизации пользователя в репозитории с [типом
		 ExtService](../../06_AK_Client_Config/UiNav_RepoConfig_repo1.htm#authentication_type) через JWT-токен или HTTP-заголовки.


		В данном разделе должны создаваться подразделы с именами внешних
		 сервисов аутентификации. В каждом подразделе задаются следующие
		 параметры:


			- Type. Тип внешнего
			 сервиса. Допускаются следующие значения:


				- JWT.  Сервис,
				 возвращающий JWT-токен с информацией о пользователе;


				- HttpHeaders.
				 Сервис, дополняющий запросы к BI-серверу HTTP-заголовками
				 с информацией о пользователе.


			- AuthUrl. URL-адрес
			 страницы аутентификации внешнего сервиса. По данному адресу
			 осуществляется переход, если аутентификация еще не осуществлялась
			 или пользователь нажал кнопку Выход в репозитории;


			- UserIdAttr.
			 Наименование атрибута или путь до него в JWT-токене или HTTP-заголовках,
			 который будет содержать уникальный идентификатор пользователя.
			 Например, наименование атрибута «given_name» или путь «/path/to/given_name»;


			- UserNameAttr.
			 Наименование атрибута или путь до него в JWT-токене или HTTP-заголовках,
			 который будет содержать отображаемое имя пользователя. Например,
			 наименование атрибута «name» или путь «/path/to/name»;


			- UserRolesAttr.
			 Наименование атрибута или путь до него в JWT-токене или HTTP-заголовках,
			 который будет содержать список групп пользователей для временного
			 добавления пользователя в полученные группы. Если параметр
			 UserRolesAttr не указан,
			 то временный пользователь добавляется во встроенную группу
			 ПОЛЬЗОВАТЕЛИ;


		Важно.
		 В списке групп пользователей не допускается указание встроенной
		 группы АДМИНИСТРАТОРЫ.


			- SignaturePublicKey.
			 Параметр указывается только при Type=JWT. Открытый ключ, который
			 будет использоваться для проверки подписи токена. Подпись
			 формируется по алгоритму RS256. Ключ задаётся в формате PEM,
			 закодированном в BASE64;


			- CertificateHash.
			 Параметр указывается только при Type=HttpHeaders. Цифровой отпечаток
			 сертификата прокси-cервера, который устанавливает соединение
			 с Bi-сервером и дополняет запросы HTTP-заголовками. Доверие
			 Bi-сервера к прокси-серверу обеспечивается путём сравнения
			 цифрового отпечатка сертификата, указанного в параметре, и
			 цифрового отпечатка сертификата, пришедшего от прокси-сервера
			 при установке mTLS соединения с Bi-сервером.


		Необязательные параметры:


			- UPN. Наименование
			 атрибута или путь до него в JWT-токене или HTTP-заголовках,
			 который будет содержать имя пользователя в формате UPN. Например,
			 наименование атрибута «upn» или путь «/path/to/upn»;


			- Email. Наименование
			 атрибута или путь до него в JWT-токене или HTTP-заголовках,
			 который будет содержать почту пользователя. Например, наименование
			 атрибута «mail» или путь «/path/to/mail».


		Для установки сессионных значений глобальных переменных после
		 успешного подключения к репозиторию может быть создан подраздел
		 с именем AdditionalAttributes
		 в описании настроек внешнего сервиса. Наименование каждого дочернего
		 элемента этого подраздела должно совпадать с наименованием атрибута
		 в JWT-токене или HTTP-заголовках, значение которого будет установлено
		 глобальной переменной. Дочерний элемент может содержать параметр
		 IdVariable, в котором
		 указывается идентификатор глобальной переменной репозитория. Если
		 параметр IdVariable не
		 указан, то будет осуществляться поиск глобальной переменной с
		 идентификатором, равным наименованию атрибута в верхнем регистре.


		 [HKLM\SOFTWARE\Foresight\

		Foresight Analytics Platform\

		10.0\PP\BIS\System\MbDefs]
		 Параметры работы со [списком
		 репозиториев](../../06_AK_Client_Config/UiNav_RepoConfig.htm#params). Допустимый строковый параметр:


			- AccessMode.
			 Признак отображения кнопки «Настройка»
			 в [окне
			 регистрации](getstarted.chm::/GetStarted/Get_Started.htm) и доступности формирования
			 списка репозиториев. Допустимые значения:


				- 0. По умолчанию.
				 Кнопка не отображается, существующий список репозиториев
				 и параметры подключения доступны только на чтение;


				- 1. Кнопка
				 отображается, формирование списка репозиториев и изменение
				 параметров подключения доступно в полном объёме.


		 [HKLM\SOFTWARE\Foresight\

		Foresight Analytics Platform\

		10.0\PP\BIS\System\Dal]
		 Параметры выполнения SQL-запросов с использованием операций
		 BI-сервера. Данные параметры влияют на работу BI-сервера, если
		 он используется в качестве клиента для доступа к СУБД.


			- Allow. Разрешение
			 выполнения SQL-запросов через BI-сервера. Допустимые значения:


				- 0. По умолчанию.
				 Выполнение SQL-запросов запрещено;


				- 1. Выполнение
				 SQL-запросов разрешено.


		 [HKLM\SOFTWARE\Foresight\

		Foresight Analytics Platform\

		10.0\PP\BIS\System\Fore]
		 Параметры работы с объектами среды разработки.


			- Disallow. Признак
			 запрета выполнения макросов, написанных на Fore, с помощью
			 операции [ForeExec](PPSOMService.chm::/Operations/Repository/ForeExec.htm).
			 При значении «1» выполнение макросов запрещено, проверка выполнения
			 операции [ForeExec](PPSOMService.chm::/Operations/Repository/ForeExec.htm)
			 осуществляется на стороне BI-сервера. Если установлено значение
			 «0» или параметр отсутствует, то проверка осуществляется веб-приложением
			 в соответствии со значением параметра foreExec
			 в файле [PP.xml](PP_config_Java.htm).


		 [HKLM\SOFTWARE\Foresight\

		Foresight Analytics Platform\

		10.0\PP\BIS\System\WebForms]
		 Параметры работы веб-форм.


			- Port. Порт BI-сервера,
			 через который будет осуществляться работа веб-форм по протоколу
			 WebSocket. По умолчанию используется порт 9091.


## Раздел Audit


В данном разделе сохраняются учётные данные [служебного
 пользователя подсистемы безопасности](../../05_RepoMngr/Setup_RepoMngr_Service_User.htm) в зашифрованном виде. Для шифрования
 учётных данных используется алгоритм ГОСТ 28147-89.


		 Подраздел
		 Ключи


		 [HKLM\SOFTWARE\Foresight\Foresight Analytics Platform\10.0\Audit\Credentials\Item0]
		 Подраздел, в котором хранятся учётные данные служебного
		 пользователя.


			- Realm. Область
			 действия учётных данных. В качестве значения ключа отображается
			 идентификатор объекта «[База
			 данных](UiNavObj.chm::/database/UiDb_database.htm)», при работе с которым используются
			 указанные учётные данные;


			- Crs/Crsa. Зашифрованные
			 учётные данные служебного пользователя.


Набор подразделов может меняться в зависимости от количества компьютеров,
 на которых были [добавлены
 учётные данные служебного пользователя](../../05_RepoMngr/Setup_RepoMngr_Service_User.htm#add_service_user).


Примечание.
 Данные подраздела формируются автоматически и доступны только для чтения.


## Раздел Service


В данном разделе указываются адреса удаленных BI-серверов для извлечения
 и [кеширования
 данных](UiNav.chm::/02_Navigator/object_caching.htm) из репозитория. BI-сервер с веб-приложением
 будет обращаться к удаленным BI-серверам и получать поток с необходимыми
 данными без дополнительного обращения к СУБД.


		 Подраздел
		 Ключи


		 [HKLM\SOFTWARE\Foresight\

		Foresight Analytics Platform\

		10.0\Service\Epts]
		 Подраздел, в котором указываются конечные точки к удалённым
		 серверам. Для каждой точки создайте подраздел с уникальным именем,
		 в каждом из которых добавьте параметр:


			- address. Фактический
			 адрес удаленного BI-сервера.


		 [HKLM\SOFTWARE\Foresight\

		Foresight Analytics Platform\

		10.0\Service\Mbs]


		 Подраздел содержит настройки репозиториев. Для настройки
		 внутри Mbs создайте подраздел
		 с уникальным именем – идентификатором репозитория, также внутри
		 созданного подраздела может быть указан параметр:


			- endpoint. Уникальное
			 имя точки доступа, указанное в подразделе Epts.
			 Указанная конечная точка будет использоваться для обращения
			 за кешированными данными при построении кубов репозитория
			 и при сохранении изменённых данных в кубы. Если в качестве
			 наименования указана пустая строка, то обращение будет производиться
			 к текущему BI-серверу. Указанная точка доступа используется
			 для всех кубов репозитория по умолчанию, если для конкретных
			 кубов не указана другая точка доступа в подразделе Cubes.


		Внутри каждого подраздела для репозитория также могут быть созданы
		 дополнительные подразделы с настройками:


			- Cubes. Подраздел
			 содержит настройки для конкретных кубов репозитория, при работе
			 с которыми будет осуществляться обращение к удаленным BI-серверам.
			 Для настройки создайте подраздел с уникальным именем, в котором
			 добавьте следующие параметры:


				- Keys. Ключи
				 кубов или ярлыков на кубы через запятую без пробелов;


				- endpoint. Уникальное
				 имя точки доступа, указанное в подразделе Epts.


		Примечание.
		 Если объекты репозитория используют ярлык, который ссылается на
		 куб, то данные для ярлыка будут получены через точку доступа,
		 указанную у куба. Если для ярлыка указана своя точка доступа,
		 отличная от точки доступа куба, то при использовании ярлыка будет
		 применяться именно эта точка доступа.


		Например:


		[HKLM\SOFTWARE\Foresight\Foresight Analytics Platform\10.0\Service\Mbs\WAREHOUSE\Cubes\InMemSettings]


		Где:


				- WAREHOUSE.
				 Идентификатор репозитория;


				- Cubes. Подраздел
				 для настройки конкретных кубов репозитория;


				- InMemSettings.
				 Подраздел для указания ключей кубов и уникального имени
				 точки доступа;


			- UpdCache. Подраздел содержит настройки,
			 определяющие место запуска процесса обновления кеша кубов.
			 Для настройки добавьте следующий параметр:


				- endpoint.
				 Уникальное имя точки доступа, указанное в подразделе Epts.


		Если подраздел UpdCache
		 создан, то BI-сервер, которому соответствует указанная точка доступа,
		 будет использоваться при выполнении задачи обновления кеша в контейнере
		 запланированных задач.


## Раздел InMem


В разделе [HKEY_CURRENT_USER] создаются параметры, определяющие режим
 работы кеширования данных по технологии [In-Memory](UiNav.chm::/02_Navigator/In-Memory.htm).
 Настройки применяются при работе текущего пользователя. Ветка, в которую
 сохраняются настройки: [HKCU\SOFTWARE\Foresight\Foresight Analytics Platform\10.0\InMem]. Работа с
 кешем доступна только в рамках одного запущенного экземпляра продукта
 «Форсайт. Аналитическая платформа».
 Указанные настройки задаются на клиентских компьютерах, если используется
 настольное приложение, или на BI-сервере, если используется веб-приложение.


Также настройки могут быть заданы в разделе [HKEY_LOCAL_MACHINE], при
 этом они будут применяться для всех пользователей. Необходимо учитывать
 приоритет поиска настроек:


	- [settings.xml](BI_Server_Settings_XML.htm#inmem).


	- Раздел [HKEY_CURRENT_USER].


	- Раздел [HKEY_LOCAL_MACHINE].


Примечание.
 Все параметры должны иметь строковый
 тип, значения указываются строчными буквами.


		 Параметры
		 Описание


		 CacheType


		 Режим работы кеширования данных кубов, в том числе кубов
		 ADOMD и баз данных временных рядов.


		Допустимые значения:


			- file. Кеширование
			 данных файловым кешем;


			- global. По умолчанию.
			 Кеширование данных глобальным кешем.


		Если параметр CacheType
		 не содержится в реестре, то выполняется проверка параметра UseInMem:


			- если параметр UseInMem
			 содержится в реестре, то используется файловый или глобальный
			 кеш в зависимости от заданного значения;


			- если параметр UseInMem
			 не содержится в реестре, то используется глобальный кеш по
			 умолчанию.


		 UseInMem
		 Признак использования механизма In-Memory для кеширования
		 данных кубов, в том числе кубов ADOMD и баз данных временных рядов
		 в файловом кеше.


		Допустимые значения:


			- true. Кеширование
			 данных файловым кешем;


			- false. По умолчанию.
			 Кеширование данных глобальным кешем.


		Важно.
		 Параметр UseInMem является
		 устаревшим и используется для совместимости с прошлыми версиями.
		 Для определения режима работы кеширования данных используйте параметр
		 CacheType. Если одновременно
		 заданы параметры UseInMem
		 и CacheType, то значение
		 параметра CacheType будет
		 приоритетнее.


		 CacheDims
		 Признак использования механизма In-Memory для кеширования данных
		 справочников. По умолчанию параметр отсутствует и используется
		 механизм [кеширования
		 объектов репозитория](uinav.chm::/02_Navigator/object_caching.htm#rds). Для кеширования справочников
		 с использованием механизма In-Memory создайте параметр и установите
		 ему значение true.
		Примечание.
		 Параметр может принимать значение true,
		 если параметр CacheType
		 принимает значение file.
		 Если параметр CacheType
		 принимает значение global,
		 то для параметра CacheDims
		 автоматически устанавливается значение false.


		 DataDir
		 Путь к папке, в которой будут храниться файлы кеша. Если
		 параметр не указан, то по умолчанию файлы сохраняются в папку:


			- Windows. «C:\ProgramData\Foresight\Foresight Analytics Platform\inmem_data\»;


			- Linux. «/var/tmp/inmem_data».


		Примечание.
		 У пользователя операционной системы, который будет работать с
		 кешированными данными, должны быть права на чтение/запись в указанную
		 папку.


		 MemoryThreshold
		 Порог свободной оперативной памяти, при превышении которого
		 будет недоступен [«прогрев»
		 кеша](UiNav.chm::/02_Navigator/Cache_In_Blob.htm#load), в процентах. Параметр типа REG_DWORD,
		 допустимые значения: 0-100. По умолчанию параметр принимает значение
		 «20», «прогрев» кеша доступен при загруженности оперативной памяти
		 на 80% и ниже.


		 MemLimitMb
		 Лимит используемой оперативной памяти в мегабайтах. Если параметр
		 не задан, то, используются следующее ограничение: x64 - 5120 мб.


		 CacheLimitMb


		 Лимит дискового пространства, выделяемого для хранения кеша
		 агрегированных данных. Значение указывается в мегабайтах. По умолчанию
		 параметр не задан. Если параметр задан, то при превышении лимита
		 будут удалены устаревшие/неиспользуемые данные кеша. Минимальный
		 размер дискового пространства, который может быть выделен для
		 хранения кеша агрегированных данных, равен 1024 мб.


		Примечание.
		 Если размер кеша агрегированных данных превысил заданный лимит,
		 но все агрегированные данные используются в текущий момент, то
		 данные кеша будут очищены при следующей генерации кеша агрегированных
		 данных.


		 Threads
		 Количество потоков, в рамках которых будет осуществляться параллельная
		 обработка данных при агрегировании. По умолчанию количество потоков
		 равно количеству логических ядер процессора.


		 AllowConv


		 Признак хранения в кеше агрегированных данных, которые могут
		 быть получены при агрегации фиксированных измерений. По умолчанию
		 агрегированные данные не сохраняются в кеше. Для включения кеширования
		 агрегированных данных задайте в параметре значение true,
		 это позволит их быстро подгружать и не тратить время на повторные
		 расчёты агрегатов при смене отметки, если исходные данные не менялись.
		 При больших объёмах исходных данных первое кеширование агрегированных
		 данных может занимать значительное время и существенно увеличить
		 размер дискового пространства, которое будет занимать кеш.


		 MatrixAggr


		 Режим использования матричной агрегации. Матричная агрегация
		 применяется, если при работе с кешированными данными агрегированные
		 значения не кешируются в файлах, а каждый раз производится их
		 расчёт в памяти.


		Допустимые значения:


			- false. Матричная
			 агрегация отключена. Режим не предназначен для использования
			 в промышленных условиях;


			- true. Значение
			 по умолчанию. Матричная агрегация применяется для всех видов
			 агрегаций, кроме агрегаций, которые рассчитываются для выхода
			 по умолчанию в стандартных кубах. Для выхода по умолчанию
			 в стандартных кубах агрегированные данные будут кешироваться
			 и дальнейшая работа будет производиться с кешированными значениями;


			- force. Не использовать
			 кешированные агрегированные значения, производить принудительный
			 расчёт всех видов агрегаций в памяти. Режим не предназначен
			 для использования в промышленных условиях;


			- optimal. Поведение
			 как при значени true,
			 но если есть возможность кешировать расчитанные агрегированные
			 значения, то кеширование будет произведено и в дальнейшая
			 работа производится с данными из кеша. Особенностью режима
			 является агрегация, когда по одному или нескольким измерениям
			 задана пользовательская альтернативная иерархия - в этом случае
			 кешируется только агрегация по измерениям с собственной иерархией
			 элементов, а агрегация по измерениям с альтернативной иерархией
			 расчитывается поверх результатов кешированной агрегации в
			 отдельной стадии расчёта.


		 OptimalThreshold


		 Порог применения режима матричной агрегации. Параметр актуален,
		 если параметру MatrixAggr
		 установлено значение optimal.


		Во время работы вычисляется размер отметки (декартово произведение
		 отмеченных элементов), переданной для произведения агрегации данных.
		 Если полученный размер меньше значения, заданного в OptimalThreshold,
		 то применяется матричная агрегация. Если размер отметки превышает
		 значение OptimalThreshold,
		 то будет производиться расчёт агрегированных значений и их кеширование
		 в файловый кеш.


		По-умолчанию порог имеет значение 10000. Если параметру OptimalThreshold установить
		 значение 0, то он учитываться не будет.


		 PreloadData


		 Признак предварительной загрузки данных из кеша в память
		 при первом обращении к кубу.


		Если параметру установить значение true,
		 то при первом обращении к любому кешированному кубу происходит
		 сканирование его кеша для полной загрузки в оперативную память.
		 В результате этого первое использование куба будет медленным,
		 а все последующие - максимально быстрыми. Может использоваться
		 для реализации предзагрузки данных.


		По умолчанию параметру установлено значение false.


		Примечание.
		 Предварительная загрузка производится до тех пор, пока не превышены
		 объем оперативной памяти или значение параметра MemLimitMb.


		 UseMemoryPool


		 Признак использования пула новых страниц с кешированными
		 данными в памяти. Для использования пула установите параметру
		 значение true. Использование
		 пула может значительно ускорить работу при повышенной нагрузке,
		 но также приведёт к повышенному расходу оперативной памяти.


		По умолчанию параметру установлено значение false,
		 при этом пул страниц кешированных данных не используется.


## Раздел Dimensions


В разделе [HKEY_CURRENT_USER] создаётся параметр, определяющий признак
 использования справочника в режиме [кросс-сессионного
 кеша](UiNav.chm::/02_Navigator/Cache_In_Blob.htm#cross_session). Настройки применяются при работе текущего пользователя.
 Ветка, в которую сохраняются настройки: [HKCU\SOFTWARE\Foresight\Foresight Analytics Platform\10.0\Dimensions]. Указанные
 настройки задаются на клиентских компьютерах, если используется настольное
 приложение, или на BI-сервере, если используется веб-приложение.


Также настройки могут быть заданы в разделе [HKEY_LOCAL_MACHINE], при
 этом они будут применяться для всех пользователей. Необходимо учитывать
 приоритет поиска настроек:


	- [settings.xml](BI_Server_Settings_XML.htm#inmem).


	- Раздел [HKEY_CURRENT_USER].


	- Раздел [HKEY_LOCAL_MACHINE].


		 Параметры
		 Описание


		 Cache


		 Признак использования справочника в режиме кросс-сессионного
		 кеша.


		Параметр типа REG_DWORD. Допустимые значения:


			- 0.
			 По умолчанию. Справочник не используется в режиме кросс-сессионного
			 кеша;


			- 1.
			 Справочник используется в режиме кросс-сессионного кеша.


## Раздел SysLogServer


В разделе [HKEY_CURRENT_USER] указываются настройки подключения к syslog-серверу
 для пересылки сообщений о событиях аудита. Настройки применяются при работе
 текущего пользователя. Ветка, в которую сохраняются настройки: [HKCU\SOFTWARE\Foresight\Foresight
 Analytics Platform\10.0\SysLogServer].
 Указанные настройки задаются на клиентских компьютерах, если используется
 настольное приложение, или на BI-сервере, если используется веб-приложение.


Также настройки могут быть заданы в разделе [HKEY_LOCAL_MACHINE], при
 этом они будут применяться для всех пользователей. Необходимо учитывать
 приоритет поиска настроек:


	- [settings.xml](BI_Server_Settings_XML.htm#syslogserver).


	- Раздел [HKEY_CURRENT_USER].


	- Раздел [HKEY_LOCAL_MACHINE].


		 Параметры
		 Описание


		 Active


		 Активация подключения к syslog-серверу для пересылки сообщений
		 о событиях безопасности.


		Параметр типа REG_DWORD. Допустимые значения:


			- 0.
			 По умолчанию. Подключение не используется;


			- 1.
			 Подключение используется.


		 Host


		 IP-адрес syslog-сервера.


		Строковый параметр. Доступен только протокол IPv4. Значение
		 по умолчанию: 127.0.0.1.


		 Port


		 Порт syslog-сервера для входящих соединений.


		Параметр типа REG_DWORD. Значение по умолчанию: 202. Задаётся
		 в шестнадцатеричной системе счисления.


		В settings.xml значение задаётся в десятичной системе счисления
		 - 514.


		 Protocol


		 Протокол, используемый для передачи.


		Параметр типа REG_DWORD. Допустимые значения:


			- 0. По умолчанию.
			 Протокол UDP;


			- 1. Протокол
			 TCP.


## Раздел Debug


В разделе создаются параметры, используемые для [расчёта
 алгоритма](CalculationAlgorithm.chm::/desktop/Work/Perform_calculations.htm).


		 Параметры
		 Описание


		 EtalonHashPath
		 Сохранение результата расчёта контрольной суммы библиотеки
		 lpsolve55.dll для ОС Windows или liblpsolve55.so для ОС Linux.


		Параметр строкового типа. В качестве значения параметра задаётся
		 полный путь до файла с результатом расчёта контрольной суммы.


		Параметр должен быть добавлен на локальных компьютерах всех
		 пользователей.


		Для получения подробной информации об интеграции с LPSolve обратитесь
		 к разделу «[Подключение
		 дополнительных модулей к «Форсайт. Аналитическая платформа](UiNav.chm::/02_Navigator/CommonSettings/Integration.htm#lpsolve)».


		 MsDump
		 Дополнительная отладочная информация при расчётах.


		Параметр типа REG_DWORD. Допустимые значения:


			- 0. По умолчанию.
			 Дополнительная отладочная информация не выводится;


			- 1. Полная информация
			 об отметке, по которой производится расчёт. Отметка формируется
			 с учётом фильтрации и значений параметров. Для отмеченных
			 элементов измерений выводится матрица со значениями атрибутов.


		При включённой [фильтрации
		 по данным](calculationalgorithm.chm::/desktop/calculation_block/filteringbydata.htm) к полной информации об отметке будет
		 добавлена информация о режиме расчёта в зависимости от того, есть
		 ли в источниках фильтрации по данным куб-приёмник блока расчёта.
		 Если нет, то будет применён многопоточный расчёт;


			- 2. К полной
			 информации об отметке будет добавлена матрица с изменёнными
			 значениями, полученными в результате расчёта;


			- 3. К полной
			 информации об отметке и матрице с изменёнными значениями добавляется
			 информация об агрегации данных: отметка, по которой производится
			 агрегация, время расчёта агрегации, результат агрегации.


		Важно.
		 Параметр влияет на скорость расчёта алгоритма при выполнении сбора
		 и вывода дополнительной отладочной информации.


		Параметр должен быть добавлен на локальных компьютерах всех
		 пользователей.


		Для получения подробной информации о получении отладочной информации
		 при расчётах обратитесь к разделу «[Как
		 просмотреть отладочную информацию при расчётах](UiModelling.chm::/FAQ/logging_of_the_calculation.htm)?».


		 MsNumThreads
		 Изменение максимального числа потоков, по которым будет
		 выполняться параллельный расчёт итераций, при расчёте блоков расчёта
		 и/или контроля. По умолчанию при многопоточном расчёте используется
		 максимум 8 потоков.


		Параметр типа REG_DWORD. Если заданное значение параметра меньше
		 числа ядер процессора, то будет использоваться число потоков,
		 заданное в параметре. Если заданное значение параметра больше
		 числа ядер процессора, то будет использоваться число потоков,
		 равное числу ядер.


		Примечание.
		 При указании параметра учитывайте особенность архитектуры процессора
		 Intel от 2019 года выпуска и выше. При расчёте итераций будет
		 использоваться удвоенное число потоков относительно заданного
		 значения параметра.


		Параметр должен быть добавлен на локальных компьютерах всех
		 пользователей.


		Для получения подробной информации о многопоточном расчёте обратитесь
		 к разделу «[Как
		 выполнять многопоточный расчёт?](CalculationAlgorithm.chm::/FAQ/MultiThreadedCalculation.htm)».


		 MsUseRDSVersions
		 Использование различных версий значений элементов атрибута
		 [версионного
		 справочника](UiNavObj.chm::/reference_book/FAQ/UiRds_Work_RDS_Elements_work_2.htm) в [формуле
		 расчёта](CalculationAlgorithm.chm::/desktop/Calculation_block/Formula.htm) при [поточечном
		 расчёте](CalculationAlgorithm.chm::/desktop/Work/Perform_calculations.htm) всего алгоритма и/или конкретной формулы.


		Параметр типа REG_DWORD. Допустимые значения:


			- 0. По умолчанию.
			 При расчёте алгоритма для каждой календарной точки значения
			 элементов будут фиксированными на [дату
			 начала расчёта](CalculationAlgorithm.chm::/desktop/Work/Calculation_period_management.htm);


			- 1. При расчёте
			 алгоритма для каждой календарной точки значения элементов
			 будут перестраиваться в зависимости от текущей даты расчёта.


		Важно.
		 Использование параметра со значением «1» приводит к снижению производительности
		 и продолжительному расчёту алгоритма.


		Параметр должен быть добавлен на локальных компьютерах всех
		 пользователей.


		Для получения подробной информации о формулах расчёта обратитесь
		 к разделу «[Настройка
		 формул расчёта](CalculationAlgorithm.chm::/desktop/Calculation_block/Formula.htm)».


		Примечание.
		 Параметр доступен для использования только в настольном приложении.


## Раздел Nav


В разделе создаются параметры, используемые навигатором объектов.


		 Параметры
		 Описание


		 RecursiveDeps
		 Признак использования рекурсивных запросов при получении
		 зависимостей объектов репозитория. Актуально, если репозиторий
		 создан на базе СУБД PostgreSQL/Postgres Pro или SQLite. Для других
		 СУБД параметр игнорируется.


		Допустимые значения:


			- 0
			 или False. По умолчанию.
			 Рекурсивные запросы не используются;


			- 1
			 или True. Использовать
			 рекурсивные запросы для получения зависимостей у объектов,
			 а также у зависимых и у зависящих от них объектов.


## Дополнительные ключи


В ветке [HKLM\SOFTWARE\Foresight\Foresight Analytics Platform\10.0] могут быть созданы
 отдельные параметры.


		 Параметры
		 Описание


		 PlatformUserType
		 Ограничение доступа к [элементам
		 справочников НСИ](UiNavObj.chm::/reference_book/Work/Work_Elements.htm) с помощью диапазонов ключей,
		 на основании которых пользователям присваиваются роли: вендор,
		 партнёр, заказчик. Роль позволяет добавлять и редактировать элементы
		 в справочнике НСИ в своём диапазоне ключей и в следующих диапазонах
		 ключей, расположенных по возрастанию. Элементы с ключами из диапазона
		 ключей, расположенных по убыванию, будут недоступны для изменений.


		Для получения подробной информации о правах доступа на элементы
		 справочников НСИ обратитесь к разделу «[Права доступа
		 на элементы справочников НСИ](Admin.chm::/03_Admin/Admin_ElementAccess.htm)».


		Параметр типа REG_DWORD. Допустимые значения:


			- 0. Доступны
			 все элементы. Роль не присваивается;


			- 1. Доступный
			 диапазон ключей элементов от 0 до 1 млрд. Роль пользователя
			 - вендор;


			- 2. Доступный
			 диапазон ключей элементов от 1 млрд до 1,5 млрд. Роль пользователя
			 - партнёр;


			- 3. Доступный
			 диапазон ключей элементов от 1,5 млрд до 2 млрд. Роль пользователя
			 - заказчик.


		Параметр должен быть добавлен на локальных компьютерах всех
		 пользователей.


		Примечание.
		 Параметр доступен для использования только в настольном приложении.


		 VirtualMemoryThreshold
		 Порог использования виртуальной памяти, при превышении которого
		 будет включен механизм очистки кеша метаданных объектов. Параметр
		 типа REG_DWORD, допустимые значения: 0-100%.


См. также:


[Системные
 настройки продукта «Форсайт. Аналитическая платформа»](BI_Server_Settings.htm)
 | [Настройки в settings.xml](BI_Server_Settings_XML.htm)


		Справочная
		 система на версию 10.9
		 от 18/08/2025,
		 © ООО «ФОРСАЙТ»,
