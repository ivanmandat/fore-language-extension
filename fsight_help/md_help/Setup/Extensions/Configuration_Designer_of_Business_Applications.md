# Настройка конфигурации конструктора бизнес-приложений

Настройка конфигурации конструктора бизнес-приложений
-


# Настройка конфигурации конструктора бизнес-приложений


	Для корректной работы конструктора бизнес-приложений в папке установки
	 серверной части конструктора бизнес-приложений должен содержаться
	 один из файлов конфигурации:


		- [config.json](#config_json).
		 Используется, если серверная часть конструктора бизнес-приложений
		 была установлена автоматически на веб-сервер [Apache2](Apache2/Install_Backend_Designer_of_Business_Applications_Apache.htm)
		 или вручную на [IIS](ASP_NET/Manual_Install_Designer_of_Business_Applications_ASP_NET.htm);


		- [DBA.config.json](#dba_config_json).
		 Используется, если серверная часть конструктора бизнес-приложений
		 была установлена вручную на веб-сервер [Apache2](Apache2/Manual_Install_Designer_of_Business_Applications_Apache.htm),
		 [Java](Java/Install_Backend_Designer_of_Business_Applications_Java.htm)
		 или автоматически на [IIS](ASP_NET/Install_Backend_Designer_of_Business_Applications_ASP_NET.htm).


	По умолчанию в папке установки серверной части конструктора бизнес-приложений
	 содержатся преднастроенные файлы конфигурации config.json, config-sample.json
	 и sample-DBA.config.json. Файлы config-sample.json и sample-DBA.config.json
	 используются в качестве шаблонов и не влияют на работу конструктора
	 бизнес-приложений. Создание и заполнение файла DBA.config.json выполняется
	 вручную на основе файла sample-DBA.config.json. Содержимое файлов
	 config.json и config-sample.json совпадает.


	Примечание.
	 При обновлении конструктора бизнес-приложений содержимое файлов config-sample.json
	 и sample-DBA.config.json может измениться. Для сохранения настроенной
	 конфигурации используются файлы config.json и DBA.config.json.


	Для применения изменения конфигурации конструктора бизнес-приложений
	 в файле config.json или DBA.config.json [перезапустите
	 серверную часть конструктора бизнес-приложений](Restart_Backend_Designer_of_Business_Applications.htm).


## config.json


	Пути расположения файла config.json по умолчанию:


		- /opt/foresight/fp10.x-dba/config
		 в ОС Linux;


		- C:\Program Files (x86)\Foresight\DBA_10.x\config в ОС Windows.
		 Папка DBA_10.x
		 создаётся [вручную](ASP_NET/Manual_Install_Designer_of_Business_Applications_ASP_NET.htm)
		 и может отличаться.


	Содержимое преднастроенных файлов конфигурации config.json, config-sample.json:


	{

	  "targetRepo": "",

	  "targetApp": "",

	  "serviceUrl": "",

	  "locale": "ru",

	  "locales": ["ru"],

	  "title": "DBA",

	  "themes": ["dba10"]

	}


	Файл config.json состоит из основных и дополнительных полей.


### Основные поля


	Для работы конструктора бизнес-приложений с минимально необходимыми
	 настройками задайте основные поля:


	[![](../Opened.gif)![](../Closed.gif)targetRepo](javascript:TextPopup(this))


		Идентификатор репозитория по умолчанию.


		В ОС Linux идентификатор репозитория задаётся в файле [Metabases.xml](../06_AK_Client_Config/Configuring_repository_list_in_the_system_registry.htm#metabase_xml_list).
		 В ОС Windows с помощью диалога «[Настройка
		 подключения к репозиторию](../06_AK_Client_Config/UiNav_RepoConfig_repo1.htm)». Также в данном диалоге
		 должен быть установлен флажок «Для
		 всех пользователей на компьютере».


		Для подключения нескольких репозиториев заполните поле [repositories](#repositories).


	[![](../Opened.gif)![](../Closed.gif)targetApp](javascript:TextPopup(this))


		Идентификатор [бизнес-приложения](Constructor.chm::/Intro/Component_interface.htm),
		 которое будет открыто по умолчанию.


		Для подключения нескольких бизнес-приложений заполните поле
		 [repositories](#repositories).


	[![](../Opened.gif)![](../Closed.gif)serviceUrl](javascript:TextPopup(this))


		Адрес веб-сервиса продукта «Форсайт. Аналитическая платформа».


		В ОС Linux адрес:


		http://<веб-сервер>:<номер порта>/dba/PPService.axd


		Где:


			- <веб-сервер>.
			 IP-адрес или DNS-имя сервера, на котором установлена серверная
			 часть конструктора бизнес-приложений;


			- <номер
			 порта>. Номер [порта](../01_SysReq/EnviromentRequirements.htm#ports_and_protocols),
			 по которому доступна серверная часть конструктора бизнес-приложений.
			 По умолчанию используется порт 8210 при установке [дистрибутивом](Apache2/Install_Backend_Designer_of_Business_Applications_Apache.htm),
			 8110
			 при [ручной](Apache2/Manual_Install_Designer_of_Business_Applications_Apache.htm)
			 установке.


		Для просмотра необходимых портов
		 используйте:


				- файл /etc/apache2-fp10.x/ports.conf
				 для Debian-подобных дистрибутивов;


				- файл /etc/httpd-fp10.x/conf/httpd-fp10.x.conf для
				 RedHat-подобных дистрибутивов;


				- файл /etc/httpd2-fp10.x/conf/ports-enabled/http-fp10.x.conf для
				 ALT Linux.


		В ОС Windows значение поля зависит от разделов, заданных в PP.xml:


			- если задан раздел [<service>](../UiWebSetup/03_Setup_Web/PP_config_Java.htm#service),
			 то укажите адрес, по которому располагается [BI-сервер](../UiWebSetup/UiWebSetup_TitlePage.htm).
			 Значение поля должно совпадать со значением атрибута url в разделе <service>:


		http://<BI-сервер>:<номер
		 порта>/FPBI_App_v10.x/axis2/services/PP.SOM.Som


		Где:


				- <BI-сервер>. IP-адрес или
				 DNS-имя сервера, на котором установлен BI-сервер;


				- <номер
				 порта>. Номер [порта](../01_SysReq/EnviromentRequirements.htm#ports_and_protocols),
				 по которому доступен BI-сервер. По умолчанию используется
				 порт 8810.


			- если задан раздел [<proxy>](../UiWebSetup/03_Setup_Web/PP_config_Java.htm#proxy),
			 то укажите адрес веб-сервиса продукта «Форсайт. Аналитическая платформа»:


		http://<веб-сервер>:<номер
		 порта>/FP_App_v10.x/app/PPService.axd


		Где:


				- <веб-сервер>.
				 IP-адрес или DNS-имя сервера, на котором установлена серверная
				 часть конструктора бизнес-приложений;


				- <номер
				 порта>. Номер [порта](../01_SysReq/EnviromentRequirements.htm#ports_and_protocols),
				 по которому доступна серверная часть конструктора бизнес-приложений.
				 По умолчанию используется порт 8110
				 при установке [дистрибутивом](ASP_NET/Install_Backend_Designer_of_Business_Applications_ASP_NET.htm),
				 8210 при [ручной](ASP_NET/Manual_Install_Designer_of_Business_Applications_ASP_NET.htm)
				 установке.


### Дополнительные поля


	Для расширения функциональности конструктора бизнес-приложений задайте
	 дополнительные поля:


	[![](../Opened.gif)![](../Closed.gif)locale](javascript:TextPopup(this))


		Двухбуквенный код языка, который будет использоваться по умолчанию,
		 если указан массив для переключения языка интерфейса в поле locales.


	[![](../Opened.gif)![](../Closed.gif)locales](javascript:TextPopup(this))


		Массив, содержащий двухбуквенные коды языков, на которые может
		 быть переключён интерфейс:


			- ru. Русский
			 язык;


			- en. Английский
			 язык.


		По умолчанию в массив включён только один элемент, соответствующий
		 русскому языку. Если в массив добавить английский язык, то в [окне регистрации](GetStarted.chm::/GetStarted/Get_Started.htm)
		 будут доступны гиперссылки для переключения языка интерфейса.


	[![](../Opened.gif)![](../Closed.gif)title](javascript:TextPopup(this))


		Заголовок конструктора бизнес-приложений, отображаемый на вкладке
		 браузера. По умолчанию поле принимает значение «DBA».


		Примечание.
		 Дочернее поле [title](#customization),
		 заданное в контейнере конкретного кода языка интерфейса, приоритетнее
		 поля title, заданного
		 в корне структуры конфигурации.


	[![](../Opened.gif)![](../Closed.gif)customization](javascript:TextPopup(this))


		Пользовательские настройки оформления конструктора бизнес-приложений
		 при переключении языка интерфейса.


		Поле является контейнером и может содержать поля:


			- ru. Русский
			 язык;


			- en. Английский
			 язык.


		Каждый код языка также является контейнером и может содержать
		 поля:


			- title. Заголовок
			 конструктора бизнес-приложений, отображаемый на вкладке браузера;


		Примечание.
		 Дочернее поле title, заданное
		 в контейнере конкретного кода языка интерфейса, приоритетнее поля
		 [title](#title), заданного
		 в корне структуры конфигурации.


			- favicon. Относительный
			 путь до изображения с логотипом конструктора бизнес-приложений,
			 который отображается на вкладке браузера;


			- logo. Относительный
			 путь до изображения с логотипом конструктора бизнес-приложений,
			 который отображается в [окне регистрации](GetStarted.chm::/GetStarted/Get_Started.htm);


			- sidebarLogo.
			 Относительный путь до изображения с логотипом конструктора
			 бизнес-приложений, который отображается на [панели
			 навигации](Constructor.chm::/Intro/Component_interface.htm);


			- sidebarLogoCollapsed.
			 Относительный путь до изображения с логотипом конструктора
			 бизнес-приложений, который отображается на свёрнутой [панели
			 навигации](Constructor.chm::/Intro/Component_interface.htm);


			- aboutLogo. Относительный
			 путь до изображения с логотипом конструктора бизнес-приложений,
			 который отображается в окне «[О программе](Constructor.chm::/Work/Work_business_application.htm#about_program)».


		Допустимые форматы изображений: *.ico, *.svg, *.png, *.bmp.


		Пример поля:


		"customization":{

		  "ru": {

		    "title": "Бизнес-приложение",

		    "favicon": "assets/images/favicon_ru.ico",

		    "logo": "assets/images/logo_ru.svg",

		    "sidebarLogo": "assets/images/logoSidebar_ru.svg",

		    "sidebarLogoCollapsed": "assets/images/logoSidebarCollapsed_ru.svg",

		    "aboutLogo": "assets/images/about_ru.svg"

		  },

		  "en": {

		    "title": "Business Application",

		    "favicon": "assets/images/favicon_en.ico",

		    "logo": "assets/images/logo_en.svg",

		    "sidebarLogo": "assets/images/logoSidebar_en.svg",

		    "sidebarLogoCollapsed": "assets/images/logoSidebarCollapsed_en.svg",

		    "aboutLogo": "assets/images/about_en.svg"

		  }

		}


	[![](../Opened.gif)![](../Closed.gif)metabase](javascript:TextPopup(this))


		Параметры используемого репозитория. По умолчанию поле отсутствует.


		Поле является контейнером и может содержать следующие поля:


			- hideClasses.
			 Массив, содержащий типы объектов, которые могут быть скрыты
			 в конструкторе бизнес-приложений и недоступны для использования.
			 Допустимые значения определяются перечислением [MetabaseObjectClass](KeSom.chm::/Enums/MetabaseObjectClass.htm).


		По умолчанию поле не задано и скрыты
		 следующие типы объектов:


				- MetabaseObjectClass.RUBRICATOR.
				 База данных временных рядов;


				- MetabaseObjectClass.WORKBOOK.
				 Рабочая книга.


		Если поле содержит пустое значение,
		 то объекты доступны для создания и работы с ними.


			- ping. Время,
			 через которое выполняется проверка соединения с BI-сервером
			 в миллисекундах. По умолчанию используется 120000 миллисекунд.


		Пример поля:


		"metabase":{

		  "hideClasses": [],

		  "ping": 20000

		}


		В результате будет доступна работа с базой данных временных
		 рядов и рабочей книгой, а также изменено время, через которое
		 выполняется проверка соединения с BI-сервером.


	[![](../Opened.gif)![](../Closed.gif)repositories](javascript:TextPopup(this))


		Репозитории, к которым доступно подключение. По умолчанию выполняется
		 подключение к репозиторию, заданному в поле [targetRepo](#targetrepo), и бизнес-приложению,
		 заданному в поле [targetApp](#targetapp).


		Поле является контейнером и содержит список идентификаторов
		 репозиториев, которые будут доступны при [открытии
		 бизнес-приложения](Open_Business_Application.htm). Для каждого репозитория в поле apps
		 задаётся список идентификаторов бизнес-приложений. Каждое бизнес-приложение
		 может содержать поле [customization](#customization)
		 для пользовательской настройки оформления при переключении языка
		 интерфейса.


		Примечание.
		 Настройки, заданные в поле customization
		 для конкретного бизнес-приложения, приоритетнее настроек, заданных
		 в корне файла конфигурации.


		Пример поля:


		"repositories": {

		 "REPOSITORY_ID": {

		   "apps": {

		     "BUSINESS_APP_1": {

		       "customization":
		 {

		         ...

		       }

		     },

		     "BUSINESS_APP_2": {

		       "customization":
		 {

		         ...

		       }

		     }

		   }

		 },

		 "WAREHOUSE": {

		   ...

		 }

		}


	[![](../Opened.gif)![](../Closed.gif)themes](javascript:TextPopup(this))


		Ключ темы конструктора бизнес-приложений. По умолчанию поле
		 принимает значение «dba10».


		Для создания пользовательской темы обратитесь к разделу «[Создание пользовательской
		 темы конструктора бизнес-приложений](FAQ/Create_Custom_DBA_Theme.htm)».


		При указании массива ключей первая тема будет использоваться
		 по умолчанию:


		"themes": ["custom_theme",
		 "dba10"]


	[![](../Opened.gif)![](../Closed.gif)customThemesPath](javascript:TextPopup(this))


		Относительный путь до папки с [пользовательскими
		 темами конструктора бизнес-приложений](FAQ/Create_Custom_DBA_Theme.htm). По умолчанию поле отсутствует,
		 набор тем содержится в папке:


			- /opt/foresight/fp10.x-dba/themes
			 в ОС Linux;


			- C:\Program Files (x86)\Foresight\DBA_10.x\themes в ОС
			 Windows.


		Пример поля:


		"customThemesPath":"customThemes/dark"


	[![](../Opened.gif)![](../Closed.gif)externalJs](javascript:TextPopup(this))


		Массив относительных путей до внешних JS-файлов, функции которых
		 могут использоваться:


			- для выполнения команды «Вызов
			 функции JS» с помощью элемента управления «[Кнопка](UiAdhoc.chm::/Blocks/Controls/Button.htm)»
			 в [аналитической
			 панели](UiAdhoc.chm::/UiAdhoc_Purpose.htm);


			- для настройки действия [гиперссылки](uireport.chm::/web/Table/Attribute/Format.htm#hyperlink)
			 в [регламентном
			 отчёте](UiReport.chm::/UiReport_purpose.htm)
			 и [форме
			 ввода](DataEntryForms.chm::/DataEntryForms_Purpose.htm);


			- для настройки действия, предобработчика, постобработчика
			 [пользовательской
			 кнопки](UiRepor.chm::/t/Web/Reports/Button/Button.htm), добавленной на панели инструментов
			 в регламентном отчёте и форме ввода;


			- для подписки на события [конструктора
			 бизнес-приложений](Constructor.chm::/Intro/Designer_business_applications.htm):


				- при отрисовке [типа
				 страницы](dhtmlFAQ.chm::/FAQ/js_to_link.htm#signature): login, navigator или object;


				- при открытии объекта;


				- при открытии папки в навигаторе объектов.


		Заданные JS-файлы загружаются перед запуском бизнес-приложения.
		 По умолчанию поле отсутствует и никакие внешние JS-файлы не загружаются.


		Пример поля:


		"externalJs": [ { "src":
		 "./functions.js" } ]


		Для получения подробной информации о сигнатуре и подключении
		 js-функции обратитесь к разделу «[Подключение пользовательской
		 js-функции](dhtmlFAQ.chm::/FAQ/js_to_link.htm)».


	[![](../Opened.gif)![](../Closed.gif)helpUrl](javascript:TextPopup(this))


		Адрес [справочной
		 системы](uinav.chm::/02_Navigator/UiNav_RepoConfig_Help.htm). По умолчанию поле отсутствует и используется
		 адрес: https://help.fsight.ru/{0}/. В этом случае язык справочной
		 системы зависит от языка интерфейса, выбранного в [окне регистрации](GetStarted.chm::/GetStarted/Get_Started.htm).
		 Массив двухбуквенных кодов языков, на которые может быть переключён
		 интерфейс, определяется в поле locales.


		Для использования справочной системы на одном из языков задайте
		 адрес с указанием локали, например: https://help.fsight.ru/ru/.
		 В этом случае язык справочной системы не зависит от языка интерфейса.


	[![](../Opened.gif)![](../Closed.gif)showVersion](javascript:TextPopup(this))


		Признак отображения версии конструктора бизнес-приложений в
		 [окне регистрации](GetStarted.chm::/GetStarted/Get_Started.htm).
		 По умолчанию поле отсутствует и версия отображается.


		Для скрытия версии конструктора бизнес-приложений задайте поле
		 со значением false:


		"showVersion": false


		Если поле отсутствует или содержит значение, отличное от false, то версия конструктора
		 бизнес-приложений отображается.


	[![](../Opened.gif)![](../Closed.gif)modules](javascript:TextPopup(this))


		Параметры открытия объектов в веб-версии бизнес-приложения.


		Поле является контейнером, в котором могут быть созданы несколько
		 подразделов c объектами заданного класса. Наименование подраздела
		 должно соответствовать числовому значению класса объекта, которое
		 можно получить в перечислении [MetabaseObjectClass](KeSom.chm::/Enums/MetabaseObjectClass.htm).
		 Для каждого подраздела в поле customization
		 для пользовательской настройки оформления доступны следующие
		 поля:


			- ribbonAutoHiding.
			 Признак автоматического скрытия ленты инструментов при работе
			 с инструментами в бизнес-приложении. Допустимые значения:


				- true. Скрывать
				 ленту инструментов, отображать только названия вкладок;


				- false. Не
				 скрывать ленту инструментов.


			- clientPDFExport.
			 Признак определения принципа [экспорта](UiAdhoc.chm::/Document/Export.htm)
			 аналитической панели в документ PDF (*.pdf). Допустимые значения:


				- true. В
				 результирующем файле блоки аналитической панели будут
				 располагаться на одной странице и отображаться так же,
				 как в конструкторе бизнес-приложений в момент экспорта;


				- false. Значение
				 по умолчанию. В результирующем файле блоки аналитической
				 панели будут располагаться на отдельных страницах и отображаться
				 в соответствии с [параметрами
				 страницы](uiadhoc.chm::/document/block_baseprops.htm#params).


			- plugins. Подключение
			 дополнительных [плагинов](DataAnalysis.chm::/Plugins/Plugins.htm).
			 Для получения подробной информации о создании плагина обратитесь
			 к разделу «[Создание
			 плагина](DataAnalysis.chm::/Plugins/Create_Plugin.htm)».


		Поле содержит настройки подключения
		 плагинов:


				- name.
				 Наименование плагина;


				- path.
				 Путь к JS-файлу плагина относительно папки установки конструктора
				 бизнес-приложений;


				- id. Идентификатор
				 плагина или тип картографического сервиса.


		При подключении плагина к инструментам
		 идентификатор должен соответствовать типу экземпляра объекта.
		 При [подключении
		 плагина к аналитической панели](DataAnalysis.chm::/Plugins/Connecting_Plugins_Dashboards.htm) - PP.Ui.Dashboard.<наименование плагина>.


		При [подключении
		 внешних картографических сервисов к карте](DataAnalysis.chm::/Plugins/Connecting_External_Services.htm) должен
		 быть указан тип картографического сервиса:


					- PP.Yandex.
					 Для Яндекс-карты;


					- PP.Bing.
					 Для Bing-карты;


					- PP.ArcGis.
					 Для ArcGis-карты;


					- PP.OpenStreetMap.
					 Для OpenStreetMap-карты;


					- PP.Google.
					 Для Google-карты.


				- css. Путь
				 к CSS-файлу со стилями плагина относительно папки установки
				 конструктора бизнес-приложений;


				- params.
				 Дополнительные параметры. Поле должно содержать поле param
				 с параметрами:


					- при подключении внешнего картографического сервиса
					 к карте: name
					 - значение
					 «APIKey», value
					 - значение ключа API;


		Примечание.
		 Атрибуты раздела задаются, если для плагинов внешних картографических
		 сервисов требуется использование ключа API.


					- при [подключении
					 пользовательских шаблонов диаграмм](DataAnalysis.chm::/Plugins/Custom/CustomDiagram.htm):
					 name. - значение
					 «ImagePath», value
					 - относительный путь до файлов шаблонов *.svg.


		Пример поля:


		"modules": {


		  "8448": {


		    "customization":{


		      "ribbonAutoHiding":
		 true,


		      "clientPDFExport":
		 true,


		      "plugins":
		 [


		        {


		          "name":
		 "Test",


		          "path":
		 "../custom_plugins/test.js",


		          "css":
		 "../custom_plugins/test.css",


		          "id":
		 "PP.Ui.Dashboard.Test",


		          "params":
		 [


		            {


		              "name":
		 "APIKey",


		              "value":
		 "AIzaSyCT36DH2CuXQ8GHtNSZASvoxQtbidhuWCU"


		            }


		          ]


		        }


		      ]


		    }


		  },


		  "2561": {


		    "customization":{


		      ...


		    }


		  }


		}


	[![](../Opened.gif)![](../Closed.gif)globalSession](javascript:TextPopup(this))


		Поле определяет место хранения моникёров соединений с репозиториями.


		Допустимые значения:


			- true. Данные
			 сессии хранятся в локальном хранилище браузера (LocalStorage).
			 Моникёр соединения с репозиторием доступен на разных вкладках
			 браузера. Не поддерживается вход в один репозиторий под разными
			 пользователями одновременно в разных вкладках;


			- false. Значение
			 по умолчанию. Данные сессии хранятся в хранилище сеансов браузера
			 (SessionStorage). На каждой вкладке открывается новое соединение.
			 Ранее открытое соединение из другой вкладки недоступно. Поддерживается
			 вход в один репозиторий под разными пользователями одновременно
			 в разных вкладках.


		Пример поля:


		"globalSession": false


### Пример


	Пример файла config.json для работы конструктора бизнес-приложений:


	{

	  "targetRepo": "WAREHOUSE",

	  "targetApp": "BUSINESS_APPLICATION",

	  "serviceUrl": "http://10.7.0.100:8810/FPBI_App_v10.x/axis2/services/PP.SOM.Som",

	  "locale": "ru",

	  "locales": ["ru"],

	  "title": "DBA",

	  "themes": ["dba10"]

	}


## DBA.config.json


	Пути расположения файла DBA.config.json по умолчанию:


		- /opt/foresight/dba/10.x/config в ОС Linux,
		 если серверная часть бизнес-приложения была установлена на [Apache2](Apache2/Manual_Install_Designer_of_Business_Applications_Apache.htm)
		 вручную. Папка dba создаётся [вручную](ASP_NET/Manual_Install_Designer_of_Business_Applications_ASP_NET.htm)
		 и может отличаться;


		- C:\Program Files (x86)\Foresight\Designer of Business Application
		 10.x
		 Web Server\config в ОС Windows, если серверная часть бизнес-приложения
		 была установлена на веб-сервер [IIS](ASP_NET/Install_Backend_Designer_of_Business_Applications_ASP_NET.htm)
		 автоматически;


		- /path_to_tomcat/webapps/path/config в ОС Linux, если серверная
		 часть бизнес-приложения была установлена на [Java](Java/Install_Backend_Designer_of_Business_Applications_Java.htm):


			- path_to_tomcat.
			 Путь до установки Apache Tomcat;


			- path.
			 Контекстный путь, указанный на [четвертом
			 шаге установки](Java/Install_Backend_Designer_of_Business_Applications_Java.htm) Apache Tomcat.


		- C:\Program Files\Apache Software Foundation\Tomcat 9.0\webapps\<path>\config
		 в ОС Windows, если серверная часть бизнес-приложения была установлена
		 на [Java](Java/Install_Backend_Designer_of_Business_Applications_Java.htm):


			- <path>.
			 Контекстный путь, указанный на [четвертом
			 шаге установки](Java/Install_Backend_Designer_of_Business_Applications_Java.htm) Apache Tomcat.


	Содержимое преднастроенного файла конфигурации sample-DBA.config.json:


	{

	  "targetRepo": "ID_REPO",

	  "targetApp": "ID_APP",

	  "ppServiceUrl": "",

	  "locale": ["ru"],

	  "refreshMetabaseOnLogon": "true",

	  "repositories": {

	    "ID_REPO": {

	      "repoIdent": "ID_REPO",

	      "apps": {

	        "ID_APP":
	 {

	          "appIdent":
	 "ID_APP",

	          "breadcrumbRootTitle":
	 "FORESIGHT. Бизнес приложение",

	          "mainMenuLogo":
	 "assets/design/img/PPlogo_menuheader.png",

	          "pageMetadataLogo":
	 "assets/design/img/PPlogo_login.png"

	        }

	      }

	    }

	  }

	}


### Описание полей


	Ниже приведён список полей, которые присутствуют в JSON-структуре
	 по умолчанию:


			 Поле
			 Описание


			 targetRepo
			 Идентификатор репозитория, к которому осуществляется подключение
			 по умолчанию. В качестве значения укажите идентификатор одного
			 из репозиториев, настройки которого имеются в группе repositories.


			 targetApp
			 Идентификатор бизнес-приложения, которое будет открыто.
			 В качестве значения укажите идентификатор одного из бизнес-приложений,
			 настройки которого имеются в группе apps репозитория, указанного
			 в targetRepo.


			 ppServiceUrl
			 URL-адрес BI-сервера, с которым будет взаимодействовать
			 бизнес-приложение для получения данных.


			 locale


			 Массив, содержащий двухбуквенные коды языков, на которые
			 может быть переключён интерфейс. По умолчанию в массив включён
			 только один элемент, соответствующий русскому языку. Если
			 в массив добавить какие-либо дополнительные языки, то на стартовой
			 странице, где осуществляется авторизация в репозитории, в
			 нижней части будут доступны гиперссылки для переключения языка
			 интерфейса.


			 refreshMetabaseOnLogon
			 Признак автоматического обновления содержимого репозитория
			 после подключения пользователя. Допустимые значения:


				- true. Обновлять
				 содержимое репозитория. При обновлении репозитория запрашиваются
				 и кешируются описания используемых объектов репозитория;


				- false. Значение
				 по умолчанию. Не обновлять содержимое репозитория. Используются
				 кешированные описания объектов репозитория или загружаются
				 только те, которые необходимы для построения стартовой
				 страницы бизнес-приложения.


			 repositories
			 Данные о репозиториях, к которому осуществляется подключение.
			 В данном разделе могут быть созданы несколько подразделов
			 ID_REPO.


			 ID_REPO
			 Раздел с информацией о репозитории. Наименование поля должно
			 совпадать со значением, указываемым в поле repoIdent.


			 repoIdent
			 Идентификатор репозитория. Значение поля должно совпадать
			 с названием раздела ID_REPO.


			 apps
			 Данные о бизнес-приложении. В данном разделе могут быть
			 созданы несколько подразделов ID_APP.


			 ID_APP
			 Раздел с информацией о бизнес-приложении. Наименование
			 поля должно совпадать со значением, указываемым в поле appIdent.


			 appIdent
			 Идентификатор бизнес-приложения в репозитории. Значение
			 поля должно совпадать с названием раздела ID_APP.


			 breadcrumbRootTitle
			 Заголовок, который будет выводиться в корневом элементе
			 строки навигации.


			 mainMenuLogo
			 Путь к изображению, которое отображается в верхнем левом
			 углу над списком объектов при развёрнутом боковом меню.


			 mainMenuLogoMini
			 Путь к изображению, которое отображается в верхнем левом
			 углу над списком объектов при свёрнутом боковом меню.


			 pageMetadataLogo
			 Путь к изображению, которое отображается над полями логина
			 и пароля.


	Также в JSON-структуру на корневом уровне можно включить дополнительные
	 поля, которые будут обрабатываться и влиять на работу конструктора
	 бизнес-приложений. Данные поля имеют значения по умолчанию, которые
	 применяются, если поле отсутствует в структуре:


	{

	    ...

	    "ping": 10000,

	    "ppLibUrl": "assets/platform_modules",

	    "ribbonAutoHiding": true,

	    "externalJs": [],

	    "externalCss": [],

	    "onCloseQuery": "",

	    "isSendLogToBI": "false",

	    "showNavGroupFirstElement": "false",

	    "clearMetabaseObjectsCacheOnOpen":
	 "true",

	    "logToConsole": "true",

	    "showMessageForUnhandledError": "true",

	    "authentication": "OAuth",

	    "allowOauthProviders": ["FCC",
	 "Google"],

	    "autoStartOauthProvider": "FCC",

	    "useDefaultUserOauth": "true",

	    "globalSession": "false",

	    "plugins": [

	        {

	            "Type":
	 "PP.Ui.Prx.MyLabel",

	            "Path":
	 "../plugins/MyLabel.js",

	            "Css":
	 "../plugins/MyLabel.css",

	            "Name":
	 "MyLabel",

	            "Loaded":
	 true

	        },

	        {

	            ...

	        }

	    ],

	    "modules" : {

	        "CLASS":{

	            "url":
	 "http://project/app/olap.html",

	            "urlSettings":

	                {

	                  "isRepo":
	 true,

	                  "isClass":
	 true,

	                  "mode":
	 "edit",

	                  "isConnectionId":
	 true

	                }

	           }

	        ...

	    }

	    ...

	 }


	Описание полей:


			 Поле
			 Описание


			 ping
			 Время, через которое выполняется проверка соединения с
			 BI-сервером, в миллисекундах. Если значение поля не задано
			 или установлено значение меньше 0, то будет использоваться
			 значение по умолчанию - 120000 миллисекунд (2 минуты). Если
			 установлено значение 0, то после открытия репозитория будет
			 отправлен единственный запрос на проверку соединения с BI-сервером.


			 ppLibUrl
			 Путь до библиотек продукта «Форсайт. Аналитическая платформа»,
			 которые используются при работе бизнес-приложения. По умолчанию
			 используется относительный путь «assets/platform_modules»,
			 который ищется в папке с установленной серверной частью расширений.


			 ribbonAutoHiding


			 Признак автоматического скрытия ленты инструментов при
			 работе с инструментами в бизнес-приложении. Допустимые значения:


				- true. Скрывать
				 ленту инструментов, отображать только названия вкладок;


				- false. Не
				 скрывать ленту инструментов.


			При первом открытии бизнес-приложения значение поля будет загружено
			 на компьютер пользователя. Пользователь может изменить режим
			 работы ленты инструментов, при этом выбранный режим будет
			 использоваться во всех инструментах в рамках текущей сессии
			 пользователя.


			 externalJs
			 Массив URL-адресов до внешних js-файлов, которые будут
			 загружены перед инициализацией бизнес-приложения. По умолчанию
			 никакие внешние js-файлы не загружаются.


			 externalCss
			 Массив URL-адресов до внешних css-файлов, которые будут
			 загружены перед инициализацией бизнес-приложения. По умолчанию
			 никакие внешние css-файлы не загружаются.


			 onCloseQuery
			 Внешний обработчик событий, который наступает при закрытии
			 объекта, входящего в состав бизнес-приложения. В качестве
			 обработчика событий используется функция, написанная на языке
			 JavaScript.


			Укажите URL-адрес до внешнего js-файла с функцией одним
			 из способов:


				- используйте поле externalJs;


				- загрузите файл на странице ![](appLayout16.png)
				 «[Разметка
				 и оформление](Constructor.chm::/Desktop/Layout_and_design.htm)» в окне «Бизнес-приложение <наименование
				 объекта>».


			В поле onCloseQuery
			 укажите наименование используемой функции в формате:


			javascript:<наименование
			 функции(args)>


			Например:


			javascript:<onCloseQuery(args)>


			Пример внешнего js-файла с функцией onCloseQuery:


			function onCloseQuery(args)

			{

			  console.log('onCloseQuery');

			  console.log(args);

			  console.log(args.instance.getReport());

			  // Скроем окно подтверждения действия для сохранения
			 изменённых данных при закрытии объекта

			  args.instance.isDirty = false;

			}


			При выполнении примера будут получены настройки текущего
			 регламентного отчёта, формы ввода или экспресс-отчёта с помощью
			 метода getReport.
			 При закрытии объекта будет скрыто окно подтверждения действия
			 для сохранения изменённых данных с помощью свойства isDirty. По умолчанию все
			 изменения сохраняются.


			Для получения настроек конкретного класса объектов «Форма ввода/вывода» используйте
			 свойство class со
			 значением «2103041» вместо метода
			 getReport, например:


			function onCloseQuery(args)

			{

			  console.log('onCloseQuery');

			  console.log(args);

			  if (args.instance.class === 2103041)

			    // Скроем окно подтверждения действия
			 для сохранения изменённых данных при закрытии объекта

			    args.instance.isDirty = false;

			}


			Примечание.
			 Идентификатор класса объектов «2103041» может меняться в зависимости
			 от репозитория.


			 isSendLogToBI
			 Признак логирования операций, который бизнес-приложение
			 отправляет на BI-сервер. По умолчанию логирование выключено.
			 При установке значения true
			 лог выполняемых операций будет вестись на BI-сервере.


			 showNavGroupFirstElement
			 Признак отображения первого дочернего элемента при переходе
			 по группам меню. Допустимые значения:


				- true. При
				 выборе элемента, содержащего дочерние элементы, открывается
				 первый дочерний элемент. Выбрать родительский элемент
				 нельзя.


				- false. Значение
				 по умолчанию. При выборе родительского элемента отображается
				 список его дочерних элементов, при выборе дочернего элемента
				 - открывается его содержимое.


			 clearMetabaseObjectsCacheOnOpen


			 Признак очистки кеша объекта при открытии. Допустимые
			 значения:


				- true. Значение
				 по умолчанию. При открытии объекта репозитория очищать
				 его версию в кеше и загружать в кеш актуальную версию.


				- false. При
				 открытии объекта использовать кешированную версию объекта.


			 clientPDFExport
			 Признак определения принципа [экспорта](UiAdhoc.chm::/Document/Export.htm)
			 аналитической панели в документ PDF (*.pdf). Допустимые значения:


				- true. В
				 результирующем файле блоки аналитической панели будут
				 располагаться на одной странице и отображаться так же,
				 как в конструкторе бизнес-приложений в момент экспорта;


				- false. Значение
				 по умолчанию. В результирующем файле блоки аналитической
				 панели будут располагаться на отдельных страницах и отображаться
				 в соответствии с [параметрами
				 страницы](uiadhoc.chm::/document/block_baseprops.htm#params).


			 logToConsole
			 Признак вывода ошибок в консоль браузера. Допустимые
			 значения:


				- true. Значение
				 по умолчанию. Выводить ошибки в консоль браузера.


				- false. Не
				 выводить ошибки в консоль браузера.


			 showMessageForUnhandledError
			 Признак показа сообщений с ошибками, для которых в скриптах
			 бизнес-приложения отсутствуют специальные обработчики. Допустимые
			 значения:


				- true. Значение
				 по умолчанию. Показывать сообщение с ошибками.


				- false. Не
				 показывать сообщение с ошибками.


			 authentication
			 Тип аутентификации:


				- IntegratedDomain.
				 Интегрированная доменная. Аутентификация пользователя
				 производится с использованием доменного имени пользователя
				 и пароля (текущей учётной записи ОС).


			Если используется данный тип
			 аутентификации, то в окне регистрации не будут отображаться
			 поля для ввода имени пользователя и пароля. Также дополнительно
			 должен быть добавлен [доменный
			 пользователь](admin.chm::/03_Admin/Users/Admin_UserCreate_Domain.htm) в [менеджере
			 безопасности](admin.chm::/01_RunSecManager/Admin_Organizational_Starting.htm), выбран тип аутентификации
			 «[Интегрированная
			 доменная](../06_AK_Client_Config/UiNav_RepoConfig_repo1.htm#authentication_type)» в [настройках
			 подключения к репозиторию](../06_AK_Client_Config/UiNav_RepoConfig_repo1.htm) и [настроена
			 доменная аутентификация на веб-сервере IIS](../UiWebSetup/Authentication/UiWebSetup_FAQ_1_DomainAuthorization.htm);


				- OAuth. Аутентификация
				 пользователя производится под учётной записью сервисов,
				 поддерживающих протокол OAuth 2.0 или OpenID Connect.


			Для использования данного типа
			 аутентификации обратитесь к разделу «[Настройка
			 входа через внешние сервисы](../UiWebSetup/Authentication/login_settings_using_external_services.htm)».


			Если используется данный тип
			 аутентификации, то дополнительно задайте обязательный атрибут
			 allowOauthProviders
			 и необязательные атрибуты autoStartOauthProvider, useDefaultUserOauth при
			 необходимости.


			Если поле принимает пустое значение или оно не задано, то
			 используется парольный тип аутентификации.
			 Аутентификация пользователя производится при указании
			 имени пользователя и пароля в явном виде.


			 allowOauthProviders


			 Массив наименований сервисов авторизации, учётные записи
			 которых можно использовать для входа в веб-приложение. Поле
			 является обязательным, если поле authentication
			 принимает значение «OAuth».


			Допустимые значения определяются тем, какие сервисы заданы
			 при [настройке
			 параметров для протокола OAuth/OpenID Connect](../UiWebSetup/Authentication/OAuth_OpenID_Connect.htm#oauth_parameters), и указываются
			 в квадратных скобках через запятую. Например:


			"allowOauthProviders" : ["FCC","Google"]


			 autoStartOauthProvider


			 Порядковый номер сервиса авторизации, указанного в массиве
			 поля allowOauthProviders.
			 Например:


			"autoStartOauthProvider":
			 "FCC"


			На выбранный сервис будет выполняться автоматическая переадресация
			 при попытке входа в веб-приложение с использованием протокола
			 OAuth или OpenID Connect. Если в качестве значения поля используется
			 сервис, который не содержится в поле allowOauthProviders,
			 то автоматическая переадресация выполняться не будет.


			Поле является необязательным. При его использовании убедитесь,
			 что поле authentication
			 принимает значение «OAuth».


			 useDefaultUserOauth


			 Признак, который определяет, под каким пользователем
			 происходит подключение к репозиторию при авторизации через
			 протокол OAuth или OpenID Connect:


				- true. По
				 умолчанию. Подключение к репозиторию выполняется под пользователем
				 по умолчанию, учётные данные которого были сохранены с
				 помощью утилиты [PP.Util](../05_RepoMngr/Service_Applications/PP_Util.htm);


				- false. Подключение
				 к репозиторию выполняется под конкретным пользователем,
				 авторизовавшемся на внешнем сервере. Если используется
				 данное значение, то учётные данные каждого пользователя
				 для каждого репозитория должны быть сохранены с помощью
				 утилиты [PP.Util](../05_RepoMngr/Service_Applications/PP_Util.htm).
				 Для получения подробной информации о сохранении учётных
				 данных пользователя обратитесь к разделу «[Настройка
				 входа через внешние сервисы](../UiWebSetup/Authentication/OAuth_OpenID_Connect.htm#oauth_save_user)».


			Поле является необязательным. При его использовании убедитесь,
			 что поле authentication
			 принимает значение «OAuth».


			 globalSession


			 Поле определяет место хранения моникёров соединений
			 с репозиториями.


			Допустимые значения:


				- true. Данные
				 сессии хранятся в локальном хранилище браузера (LocalStorage).
				 Моникёр соединения с репозиторием доступен на разных вкладках
				 браузера. Не поддерживается вход в один репозиторий под
				 разными пользователями одновременно в разных вкладках;


				- false. Значение
				 по умолчанию. Данные сессии хранятся в хранилище сеансов
				 браузера (SessionStorage). На каждой вкладке открывается
				 новое соединение. Ранее открытое соединение из другой
				 вкладки недоступно. Поддерживается вход в один репозиторий
				 под разными пользователями одновременно в разных вкладках.


			 plugins


			 Подключение дополнительных [плагинов](DataAnalysis.chm::/Plugins/Plugins.htm).
			 Для получения подробной информации о создании плагина обратитесь
			 к разделу «[Создание
			 плагина](DataAnalysis.chm::/Plugins/Create_Plugin.htm)».


			Поле содержит настройки подключения плагинов:


				- Type. Идентификатор
				 плагина или тип картографического сервиса.


			При подключении плагина к инструментам
			 идентификатор должен соответствовать типу экземпляра объекта:


					- PP.Ui.Dashboard.<наименование
					 плагина>.
					 При [подключении
					 плагина к аналитической панели](DataAnalysis.chm::/Plugins/Connecting_Plugins_Dashboards.htm);


					- PP.Ui.Prx.<наименование
					 плагина>.
					 При [подключении
					 плагина к регламентному отчёту и форме ввода](DataAnalysis.chm::/Plugins/Connecting_Plugins_Report.htm).


			При [подключении
			 внешних картографических сервисов к карте](DataAnalysis.chm::/Plugins/Connecting_External_Services.htm)
			 должен быть указан тип картографического сервиса:


					- PP.Yandex.
					 Для Яндекс-карты;


					- PP.Bing.
					 Для Bing-карты;


					- PP.ArcGis.
					 Для ArcGis-карты;


					- PP.OpenStreetMap.
					 Для OpenStreetMap-карты;


					- PP.Google.
					 Для Google-карты.


				- Path. Путь
				 к JS-файлу плагина относительно папки установки конструктора
				 бизнес-приложений;


				- Css. Путь
				 к CSS-файлу со стилями плагина относительно папки установки
				 конструктора бизнес-приложений;


				- Name. Наименование
				 плагина;


				- Loaded.
				 Способ загрузки плагина:


					- true.
					 Плагин загружается сразу;


					- false. Плагин
					 загружается по требованию.


			Примечание.
			 Значение false используется
			 только при [подключении
			 плагина к аналитической панели](DataAnalysis.chm::/Plugins/Connecting_Plugins_Dashboards.htm).


				- Params.
				 Дополнительные параметры. Поле должно содержать поле Param с параметрами:


					- при подключении
					 внешнего картографического сервиса к карте:


						- Name. Значение
						 «APIKey»;


						- Value. Значение
						 ключа API.


			Примечание.
			 Атрибуты раздела задаются, если для плагинов внешних картографических
			 сервисов требуется использование ключа API.


					- при [подключении
					 пользовательских шаблонов диаграмм](DataAnalysis.chm::/Plugins/Custom/CustomDiagram.htm):


						- Name. Значение
						 «ImagePath»;


						- Value. Относительный
						 путь до файлов шаблонов *.svg.


			 modules


			 Параметры открытия объектов в веб-версии бизнес-приложения.
			 В данном разделе могут быть созданы несколько подразделов
			 CLASS.


			 CLASS


			 Раздел с информацией об открытии объекта заданного класса.
			 Наименование поля должно соответствовать числовому значению
			 класса объекта, для которого определяются параметры открытия.
			 Числовое значение класса объекта можно получить в перечислении
			 [MetabaseObjectClass](KeSom.chm::/Enums/MetabaseObjectClass.htm).


			 url


			 Ссылка на страницу веб-приложения для открытия объекта.


			 urlSettings


			 Параметры, которые также будут передаваться в открываемую
			 url страницу.


			 isRepo


			 Передавать параметр repo с наименованием текущего открытого
			 репозитория.


			 isClass


			 Передавать параметр class со значением класса объекта.


			 mode


			 Передавать параметр mode, определяющий режим открытия
			 объекта. Может принимать значение edit (объект открывается
			 на редактирование) и view (объект открывается на просмотр).
			 Если поле не указано, то объект будет открываться на просмотр.


			 isConnectionId


			 Передавать параметр ConnectionId с моникёром открытой
			 сессии.


### Пример


Пример файла DBA.config.json для работы конструктора бизнес-приложений:


{

  "targetRepo": "TEST_REPOSITORY",

  "targetApp": "TEST_APP",

  "ppServiceUrl": "http://SampleServer/FPBI_App_v10.x/axis2/services/PP.SOM.Som",

  "locale": ["ru"],

  "repositories": {

    "TEST_REPOSITORY": {

      "repoIdent": "TEST_REPOSITORY",

      "apps": {

        "TEST_APP": {

          "appIdent":
 "TEST_APP",

          "breadcrumbRootTitle":
 "FORESIGHT. Бизнес приложение",

          "mainMenuLogo":
 "assets/design/img/PPlogo_sm.png",

          "pageMetadataLogo":
 "assets/design/img/PPlogo.png"

        }

      }

    }

  }

}


См. также:


[Серверная
 часть конструктора бизнес-приложений](Backend_Designer_of_Business_Applications.htm) | [Перезапуск
 серверной части конструктора бизнес-приложений](Restart_Backend_Designer_of_Business_Applications.htm)


		Справочная
		 система на версию 10.9
		 от 18/08/2025,
		 © ООО «ФОРСАЙТ»,
