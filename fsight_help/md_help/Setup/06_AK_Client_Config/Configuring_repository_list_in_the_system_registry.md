# Настройка списка репозиториев

Настройка списка репозиториев
-


# Настройка списка репозиториев


	Перед настройкой списка репозиториев ознакомьтесь с [ограничениями
	 при работе с BI-сервером на Linux](../UiWebSetup/03_Setup_Web/Linux_constraints.htm).


## Список репозиториев в реестре


	[Список репозиториев](UiNav_RepoConfig.htm#params), сформированный
	 с помощью мастера настройки репозитория в веб-приложении или окна
	 «Параметры» в настольном приложении,
	 сохраняется в реестре операционной системы. Пользователь операционной
	 системы, под которым осуществляется работа со списком репозиториев,
	 должен обладать правами на внесение изменений в реестр. В зависимости
	 от разрядности операционной системы и используемой платформы, путь
	 до настроек репозитория может отличаться:


		- [HKEY_CURRENT_USER\SOFTWARE\Foresight\Foresight Analytics Platform\10.0\Metabases] -
		 настройки репозиториев для текущего пользователя, не зависимо
		 от разрядности системы;


		- [HKEY_LOCAL_MACHINE\SOFTWARE\Foresight\Foresight Analytics Platform\10.0\Metabases] -
		 настройки репозиториев в случае, когда разрядность «Форсайт. Аналитическая платформа»
		 совпадает с разрядностью операционной системы. Для всех пользователей.


	Для настройки конкретного репозитория используйте раздел реестра:


		- [HKEY_CURRENT_USER\SOFTWARE\Foresight\Foresight Analytics Platform\10.0\Metabases\<идентификатор репозитория>] -
		 настройки конкретного репозитория для текущего пользователя, не
		 зависимо от разрядности системы;


		- [HKEY_LOCAL_MACHINE\SOFTWARE\Foresight\Foresight Analytics Platform\10.0\Metabases\<идентификатор репозитория>] -
		 настройки конкретного репозитория в случае, когда разрядность
		 «Форсайт. Аналитическая платформа»
		 совпадает с разрядностью операционной системы. Для всех пользователей.


	Допустимые параметры данного раздела аналогичны [атрибутам](#structure),
	 допустимым для создания файла Metabases.xml.


	Для получения подробной информации о формировании списка репозиториев
	 в реестре ОС Linux обратитесь к разделу «[Конфигурация
	 и настройка](../UiWebSetup/03_Setup_Web/config_and_setting.htm)».


## Список репозиториев в Metabases.xml


	Для настройки подключения к репозиториям в ОС Linux создайте файл
	 Metabases.xml в папке /opt/foresight/fp10.x-biserver/etc.


	В ОС Windows для настройки списка репозиториев на нескольких рабочих
	 станциях можно создать файл Metabases.xml на сетевом или локальном
	 ресурсе. Путь к файлу должен быть прописан в системном реестре рабочих
	 станций. Для этого создайте строковый параметр Path
	 со значением пути до папки, в которой содержится файл Metabases.xml,
	 в разделе реестра [HKEY_LOCAL_MACHINE\Software\Foresight\Foresight Analytics Platform\10.0\Metabases]. Изменения
	 настроек подключения к репозиториям в файле Metabases.xml автоматически
	 применяются на рабочих станциях, которые настроены на этот файл.


	Репозитории, заданные через файл Metabases.xml, недоступны для редактирования
	 с помощью мастера настройки репозитория в веб-приложении или окна
	 «Параметры» в настольном приложении.


	Примечание.
	 При совпадении наименований репозиториев, заданных в файле Metabases.xml
	 и [мастере настройки репозитория](UiNav_RepoConfig.htm#params)/окне
	 «[Параметры](UiNav_RepoConfig.htm#params)»,
	 в списке будут отображены оба репозитория.


### Структура файла Metabases.xml


	Файл Metabases.xml должен состоять из раздела <PP>, включающего
	 в себя раздел <Metabases>. Раздел <Metabases> представляет
	 собой список репозиториев. Настройки каждого репозитория задаются
	 в разделе, название которого соответствует идентификатору репозитория.
	 Для каждого репозитория создаются разделы [<LogonData>](#logondata)
	 и [<Credentials>](#credentials).


	Пример файла Metabases.xml с настройками двух репозиториев - REPOSITORY_ID
	 и WAREHOUSE:


	<PP>

	  <Metabases>

	    <REPOSITORY_ID Name="REPOSITORY_ID"
	 Authentication="1" Driver="POSTGRES" Package="STANDARDSECURITYPACKAGE"
	 >

	      <LogonData DATABASE="DATABASE_NAME"
	 SERVER="SERVER_DATABASE"/>

	      <Credentials Authentication="1"/>

	    </REPOSITORY_ID>

	    <WAREHOUSE Name="WAREHOUSE" Authentication="1"
	 Driver="MSSQL2012" Package="STANDARDSECURITYPACKAGE"
	 >

	      <LogonData DATABASE="DATABASE_NAME_MSSQL"
	 SERVER="SERVER_DATABASE_MSSQL"/>

	      <Credentials Authentication="1"/>

	    </WAREHOUSE>

	  </Metabases>

	</PP>


	Ниже приведен список доступных настроек репозитория:


			 Атрибуты
			 Описание


			 Name
			 Наименование репозитория.


			 Authentication
			 Тип аутентификации:


				- 0. Любой
				 принятый тип аутентификации;


				- 1. Парольная.
				 Аутентификация пользователя производится при указании
				 имени пользователя и пароля в явном виде;


				- 2. Интегрированная
				 доменная. Аутентификация пользователя производится с использованием
				 доменного имени пользователя и пароля (текущей учётной
				 записи ОС). Если тип аутентификации выбран для Oracle
				 в ОС Windows, то выполните [дополнительные
				 настройки сервера](../03_DB_Server_Config/Setup_DB_Server_Config_Oracle_Tuning.htm);


				- 3. Ролевая.
				 При данном типе аутентификации каждый пользователь ассоциируется
				 с определенной ролью.


			Примечание.
			 Ролевой тип аутентификации является устаревшим. Оставлен для
			 совместимости с предыдущими версиями.


				- 4. Доменная.
				 Аутентификация пользователя производится при указании
				 домена, имени пользователя и пароля в явном виде. Тип
				 аутентификации доступен, если выбран тип драйвера: Oracle,
				 Microsoft SQL Server, Microsoft SQL Server (ODBC), PostgreSQL;


				- 7. OAuth.
				 Аутентификация пользователя производится под учётной записью
				 сервисов, поддерживающих протокол OAuth 2.0 или OpenID
				 Connect. Если используется данный тип аутентификации,
				 то дополнительно создайте раздел [OAuthService](#oauth). Для использования
				 данного типа аутентификации обратитесь к разделу «[Настройка
				 входа через внешние сервисы](../UiWebSetup/Authentication/login_settings_using_external_services.htm)».


				- 8. ExtService.
				 Аутентификация пользователя осуществляется на внешнем
				 сервисе аутентификации, которые будут использоваться для
				 авторизации пользователя в репозитории через JWT-токен
				 или HTTP-заголовки. Если используется данный тип аутентификации,
				 то дополнительно создайте раздел [ExtService](#extservice). Для использования
				 данного типа аутентификации обратитесь к разделу «[Настройка
				 входа через внешние сервисы](../UiWebSetup/Authentication/login_settings_using_external_services.htm)».


			Примечание.
			 При авторизации в веб-приложении тип аутентификации определяется
			 настройками [BI-сервера](../UiWebSetup/UiWebSetup_TitlePage.htm).
			 Если в файле [PP.xml](../UiWebSetup/03_Setup_Web/PP_config_Java.htm)
			 в разделе [<metabase>](../UiWebSetup/03_Setup_Web/PP_config_Java.htm#metabase)
			 заданы репозиторий по умолчанию с помощью атрибута id
			 и тип аутентификации с помощью атрибута authentication,
			 то для данного репозитория будет применяться заданный тип
			 аутентификации независимо от настроек BI-сервера.

			Для получения подробной информации о настройках BI-сервера
			 в ОС Linux обратитесь к разделу «[Конфигурация
			 и настройка](../UiWebSetup/03_Setup_Web/config_and_setting.htm)».


			 Driver
			 [Идентификатор СУБД](#id).


			 Package
			 Тип пакета безопасности:


				- STANDARDSECURITYPACKAGE.
				 Стандартный пакет безопасности.


			 DL
			 Признак отложенной загрузки дескрипторов:


				- true.
				 При подключении к репозиторию выполняется отложенная загрузка
				 дескрипторов объектов репозитория;


				- false.
				 По умолчанию. При подключении к репозиторию не выполняется
				 отложенная загрузка дескрипторов объектов репозитория.


			Для получения подробной информации об особенностях использования
			 отложенной загрузки дескрипторов обратитесь к разделу «[Настройка
			 подключения к репозиторию](UiNav_RepoConfig_repo1.htm#delayed_loading)».


			 CompileAssemblyOnly
			 Признак возможности компиляции форм/модулей вне сборок:


				- true.
				 Компиляции форм/модулей вне сборок недоступна;


				- false.
				 По умолчанию. Компиляции форм/модулей вне сборок доступна.


			 VcsLocalPath и VcsStoredPath
			 Путь до папки на диске, в которой хранятся локальные файлы
			 объектов, если репозиторий добавлен в систему управления Git.
			 Для атрибутов указывается одинаковое значение.


			 VcsName
			 Тип системы управления версиями. Актуально, если репозиторий
			 добавлен в систему управления Git. В качестве значения атрибута
			 указывается - «Git».


			 EnableForeExecAtomic
			 Признак возможности выполнения операции [ForeExecAtomic](PPSOMService.chm::/Operations/Repository/ForeExecAtomic.htm):


				- true. Выполнение
				 операции разрешено;


				- false. По
				 умолчанию. Выполнение операции запрещено.


#### Раздел LogonData


	Раздел содержит параметры подключения к репозиторию:


			 Атрибуты
			 Описание


			 DATABASE и DATABASE_ONLY
			 Идентификатор базы данных, к которой будет осуществляться
			 подключение по умолчанию. Идентификатор базы данных должен
			 совпадать с идентификатором репозитория.


			 SCHEMA_ONLY
			 Идентификатор используемой схемы по умолчанию. По умолчанию
			 для Microsoft SQL Server используется схема «dbo», а для PostgreSQL
			 - «public». Если при [подготовке
			 серверной части СУБД](../03_DB_Server_Config/Setup_DB_Server_Config.htm) была создана пользовательская схема,
			 которая используется в качестве схемы по умолчанию, то укажите
			 её.


			Также идентификатор пользовательской схемы можно указать
			 через точку после идентификатора базы данных в атрибуте DATABASE и DATABASE_ONLY,
			 например: REPOSITORY_ID.myschema.


			 SERVER
			 IP-адрес или DNS-имя, под которым зарегистрирован сервер
			 с подключаемой базой данных (репозиторий). Параметр доступен,
			 если выбран тип драйвера: Oracle, Microsoft SQL Server, Microsoft
			 SQL Server (ODBC), PostgreSQL.


			Если порт сервера СУБД отличается от [порта
			 по умолчанию](../01_SysReq/EnviromentRequirements.htm#ports_and_protocols), то значение атрибута задаётся в формате:


				- для Microsoft SQL Server: <IP-адрес
				 или DNS-имя сервера>,<номер
				 порта>;


				- для PostgreSQL: <IP-адрес
				 или DNS-имя сервера>:<номер
				 порта>.


			При использовании СУБД Oracle порт сервера определяется
			 в файле tnsnames.ora.


			 CASESENSITIVE
			 Признак учёта регистра при работе с СУБД:


				- true.
				 Регистр учитывается;


				- false.
				 По умолчанию. Регистр не учитывается.


			Параметр доступен, если выбран тип драйвера: Microsoft SQL
			 Server, Microsoft SQL Server (ODBC), PostgreSQL.


			Примечание.
			 При [подготовке
			 серверной части СУБД PostgreSQL](../03_DB_Server_Config/Postgres_server_preparation.htm) параметры задаются в верхнем
			 регистре. Для корректного подключения к СУБД используйте параметр
			 со значением true.


			 PQGSSAPI
			 Признак использования аутентификации к серверу СУБД
			 PostgreSQL по механизму GSS API:


				- true.
				 GSS API используется;


				- false.
				 По умолчанию. GSS API не используется.


			Вместе с GSS API используется сервис Kerberos, указанный
			 в атрибуте PQKRBSRVNAME.
			 GSS API позволяет использовать разные реализации Kerberos
			 без изменения кода приложения.


			 PQKRBSRVNAME
			 Наименование сервера Kerberos, которое задано в настройках
			 сервера СУБД PostgreSQL.


			Для использования сервиса Kerberos атрибут PQGSSAPI
			 должен принимать значение true.


			 SUPPORTBINARYPROTOCOL
			 Признак использования запросов для работы с сервером
			 СУБД PostgreSQL в бинарном виде:


				- true. Для
				 работы с сервером используются запросы, приведённые к
				 бинарному виду. Использование бинарных запросов позволяет
				 сократить объем трафика, который требуется для отправки
				 запросов и получения данных с сервера;


				- false. По
				 умолчанию. Для работы с сервером используются текстовые
				 запросы.


			 USEUPN
			 Признак учёта домена при [подключении
			 доменного пользователя](Admin.chm::/03_Admin/Users/Admin_UserCreate_Domain.htm):


				- true.
				 Полное имя пользователя с доменом;


				- false.
				 По умолчанию. Короткое имя пользователя без учёта домена.


			Параметр доступен, если выбран тип драйвера PostgreSQL.


#### Раздел Credentials


	Раздел содержит параметры сохранения учётных данных пользователя,
	 используемых при подключении к базе данных:


			 Атрибуты
			 Описание


			 Authentication
			 Тип аутентификации, заданный в атрибуте [Authentication](#authentification_type) для
			 репозитория.


#### Раздел OAuthService


	Раздел содержит параметры авторизации через протокол [OAuth/OpenID
	 Connect](../UiWebSetup/Authentication/login_settings_using_external_services.htm), если атрибут [Authentication](#authentification_type)
	 принимает значение «7»:


			 Атрибуты
			 Описание


			 Providers
			 Массив наименований сервисов авторизации, учётные записи
			 которых можно использовать для входа в веб-приложение. Допустимые
			 значения определяются тем, какие сервисы заданы при [настройке
			 параметров для протокола OAuth/OpenID Connect](../UiWebSetup/Authentication/OAuth_OpenID_Connect.htm#oauth_parameters), и указываются
			 через точку с запятой.


			Атрибут является обязательным.


			 AutoStartProvider
			 Индекс сервиса авторизации, указанного в массиве атрибута
			 Providers. На выбранный
			 сервис будет выполняться автоматическая переадресация при
			 попытке входа в веб-приложение с использованием протокола
			 OAuth/OpenID Connect. Индексация сервисов начинается с 0.


			Если в качестве значения атрибута используется сервис, который
			 не содержится в атрибуте Providers,
			 то автоматическая переадресация выполняться не будет.


			Атрибут является необязательным.


#### Раздел ExtService


	Раздел содержит параметры авторизации через внешние сервисы, если
	 атрибут [Authentication](#authentification_type)
	 принимает значение «8»:


			 Атрибуты
			 Описание


			 Provider
			 Наименование настроек внешнего сервиса, который будет
			 использоваться для аутентификации пользователя при подключении.
			 В качестве значения указывается наименование одного из подразделов
			 для внешних сервисов, которые определены в разделе [ExtService](../UiWebSetup/03_Setup_Web/BI_Server_Registry_Key.htm#extservice).


			Атрибут является обязательным.


### Сводный список идентификаторов


	Ниже приведен список идентификаторов драйверов, которые могут использоваться
	 для настройки различных объектов репозитория. Идентификаторы используются
	 различными свойствами при настройке объектов с помощью макросов на
	 Fore, а также при создании списка репозиториев в файле Metabases.xml:


			 Идентификатор
			 Драйвер СУБД


			 ORCL8


			 Oracle


			 MSSQL2012


			 Microsoft SQL Server


			 MSSQL2012ODBC


			 Microsoft SQL Server (ODBC)


			 OLEDB(ODBC HIVE)


			 OLE DB (ODBC HIVE)


			 OLEDB(ODBC)


			 OLE DB (ODBC)


			 OLEDB


			 OLE DB провайдер


			 POSTGRES


			 PostgreSQL/Postgres Pro


			 POSTGRES(NO_LO)


			 Greenplum/Pivotal HD Hawq


			 ODBC


			 Generic ODBC


			 ODBC(CLICKHOUSE)


			 ClickHouse (ODBC)


			 CLICKHOUSE


			 ClickHouse


			 WSF


			 WEB Service


			 SQLITE


			 SQLite


	Примечание.
	 Для различных объектов репозитория список доступных для использования
	 драйверов может отличаться.


См. также:


[Настройка
 доступа к репозиторию](UiNav_RepoConfig.htm) | [Настройка
 подключения к репозиторию](UiNav_RepoConfig_repo1.htm)


		Справочная
		 система на версию 10.9
		 от 18/08/2025,
		 © ООО «ФОРСАЙТ»,
